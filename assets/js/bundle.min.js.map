{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/BarChart.js","js/Controller.js","js/IdleDetector.js","js/LangSwitcher.js","js/MnistData.js","js/NeuralNetwork.js","js/Paint.js","js/SlideShow.js","js/TrainingVisualization.js","js/ValidationPreview.js","js/i18nController.js","js/main-babel.js","js/main.js","js/slide-controllers/design-network.js","js/slide-controllers/intro.js","js/slide-controllers/training.js","js/slide-controllers/what-is-training-data.js","js/slide.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","BarChart","el","_classCallCheck","this","cleanup","bars","cbarcontainer","document","createElement","className","classList","add","cbartext","innerHTML","concat","appendChild","firstChild","removeChild","probabilities","highlighted","arguments","undefined","dataset","probability","style","toggle","_Paint","_interopRequireDefault","_MnistData","_NeuralNetwork","_ValidationPreview","_TrainingVisualization","Controller","config","data","MnistData","dataloaded","testpaint","paintel","trainedmodel","tf","loadLayersModel","modelPath","paint","paintClearTimeout","load","els","loadData","trainingViz","vp","nn","trainingCallback","_trainingCallback","_asyncToGenerator","regeneratorRuntime","mark","_callee3","trainXs","trainYs","wrap","_context3","prev","next","_this","setCurrentTraining","stop","_x3","_x4","apply","batchCallback","trainingImageCount","trainingProgress","modelUpdateCallback","model","updateValidationImages","updateAccuracy","setNeuralNetwork","initValidationImages","modelid","optimizerid","learningRate","activation","init","clearDelayedTrainStepPreview","train","cb","pauseTraining","delayedTrainStepPreview","trainSingleStep","cleanupValidationPreview","cleanupPaint","cleanupNetwork","initTrainingEnvironment","_this2","traintimeout","setTimeout","predict","lastTrainStepTimeout","clearTimeout","toggleTraining","training","acc","addAccuracyCallback","defaultConstructorParams","eventTypes","domElement","IdleDetector","params","_Object$assign","Object","assign","_eventTypes","_domElement","_timeOfLastEvent","_maxId","_timers","_nonIdleHandler","reset","forEach","type","addEventListener","_this3","removeEventListener","repeat","func","timeoutDelay","_len","args","Array","_key","keys","_init","id","timers","timer","windowTimeoutId","callback","window","bind","clear","delete","intervalDelay","_len2","_key2","hasFired","windowIntervalId","intervalCallback","setInterval","clearInterval","_len3","_key3","_setTimeoutInternal","_len4","_key4","_len5","_key5","_setIntervalInternal","_len6","_key6","_deinit","performance","now","values","LangSwitcher","container","langChangeCallback","menuVisible","render","element","trigger","setAttribute","mask","menu","entries","languages","_ref","_ref2","_slicedToArray","name","item","link","innerText","ev","preventDefault","bottom","clientHeight","hideMenu","showMenu","stopPropagation","remove","IMAGE_SIZE","NUM_TRAIN_ELEMENTS","NUM_DATASET_ELEMENTS","MNIST_IMAGES_SPRITE_PATH","MNIST_LABELS_PATH","imagePath","labelPath","shuffledTrainIndex","shuffledTestIndex","img","Image","canvas","ctx","getContext","willReadFrequently","imgRequest","Promise","resolve","reject","crossOrigin","onload","width","naturalWidth","height","naturalHeight","datasetBytesBuffer","ArrayBuffer","datasetBytesView","Float32Array","drawImage","imageData","getImageData","j","datasetImages","src","labelsRequest","fetch","all","labelsResponse","Uint8Array","arrayBuffer","datasetLabels","trainIndices","util","createShuffledIndices","testIndices","trainImages","slice","testImages","trainLabels","NUM_CLASSES","testLabels","batchSize","nextBatch","index","batchImagesArray","batchLabelsArray","idx","image","set","label","xs","tensor2d","labels","NeuralNetwork","options","modelUpdateAsyncCallback","console","log","trainedimages","lastrainedimages","pausecbs","dispose","sequential","layers","conv2d","inputShape","kernelSize","filters","strides","kernelInitializer","maxPooling2d","poolSize","flatten","dense","units","optimizer","adam","sgd","compile","loss","metrics","TRAIN_DATA_SIZE","BATCH_SIZE","setBackend","tidy","d","nextTrainBatch","reshape","fit","callbacks","onEpochEnd","_onEpochEnd","_callee","_context","onBatchEnd","_onBatchEnd","_callee2","_context2","trainByBatchFromData","Math","min","pop","push","addPauseCallback","_BarChart","SCALE_FACTOR","LINEWIDTH","Paint","outputThreshold","nwvis","clearTimeoutTime","drawingChanged","barchart","drawingActive","clearOnInput","pos","x","y","createUI","empty","isdown","pointerId","eventname","eventfunctions","pointerdown","removeClearTimeout","setPosition","pointermove","draw","pointerup","setClearTimeout","pointerleave","pointercancel","drawcanvas","passive","querySelector","normalizecanvas","outputbars","outputdigit","inputbox","addEventListeners","updateDimensions","floor","clientWidth","onresize","drawcontext","normalizecontext","rect","getBoundingClientRect","clientX","left","clientY","top","ox","oy","nx","ny","abs","hidePlaceholder","beginPath","lineWidth","lineCap","strokeStyle","moveTo","lineTo","stroke","fillStyle","fillRect","normalize","SKIPFACTOR","boxsize","centerx","centery","right","totalweight","max","_tf$tidy2","predicted","_this4","imageTensor","browser","fromPixels","toFloat","mul","scalar","clipByValue","show","filter","k","result","dataSync","argMax","update","parentElement","showPlaceholder","removeEventListeners","_slide","SlideShow","controller","createEventMask","slides","from","querySelectorAll","map","getAttribute","currentSlide","currentSlideController","onhashchange","maskEvents","doSlideChange","unmaskEvents","event","key","goPrevious","goNext","eventMask","position","zIndex","pointerEvents","backgroundColor","display","body","goTo","currentID","indexOf","getCurrentSlide","includes","location","hash","substring","childNodes","btn","slide","onExit","open","nav","menuItem","onEnter","SlideClass","getClass","TrainingVisualization","network","acanvas","activations","actx","icanvas","input","ictx","traindigit","currentDigit","currentProbabilities","lt1","lt2","renderNetwork","renderActivations","arr","b","target","m","ccnt","findthreshold","N","M","weights","x0","y0","lastthreshold","threshold","nodeA","nodeB","val","globalAlpha","bezierCurveTo","radius","fill","cval","arc","PI","clearRect","clearNetwork","getWeights","w","drawdenselayer","HEIGHT","XOFFSET","clearActivations","active","imageSmoothingEnabled","currentTarget","drawnodes","intermediateActivations","trainX1","toPixels","computeActivations","trainY1","pixels","A1","A2","A3","_A3$argMax$dataSync2","prediction","_prediction$argMax$da2","ValidationPreview","accuracy","acccbs","validationImages","digittext","digitcontainer","examples","nextTestBatch","examplelabels","shape","testxs","TEST_DATA_SIZE","testXs","testYs","evaluate","validationAccuracy","round","I18nControler","defaultLanguage","IMAGINARY","i18n","queryStringVariable","translationsDirectory","then","setLang","path","getLang","response","status","text","statusText","content","err","error","_Controller","_IdleDetector","_SlideShow","_i18nController","_LangSwitcher","configDefaults","idleReload","en","showLanguageSwitcher","defaultConfigUrl","URL","href","configUrl","urlSearchParams","URLSearchParams","search","has","customConfigName","get","whitelistRegex","test","toString","getCustomConfigUrl","cache","json","setLanguage","reload","aElement","DesignNetworkSlide","isBusy","istraining","select","option","value","resetadvancedoptions","updateUI","pr","onpointerdown","ooption","resetadvancednetwork","abrupt","singleStep","resetTraining","_callee4","_context4","pow","toPrecision","resetNetwork","rateSlider","rateLabel","oninput","rate","onchange","_callee5","_context5","registerClass","IntroSlide","initIntroPaint","TrainingSlide","WhatIsTrainingDataSlide","Slide","slideClasses","slideClass"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class BarChart {\n  constructor(el) {\n    this.el = el;\n    // cleanup potentially previously existing bars\n    this.cleanup();\n\n    this.bars = [];\n    for (let i = 0; i < 10; i += 1) {\n      const cbarcontainer = document.createElement('div');\n      cbarcontainer.className = 'barcontainer';\n      this.bars[i] = document.createElement('div');\n      this.bars[i].classList.add('bar');\n      const cbartext = document.createElement('div');\n      cbartext.className = 'bartxt';\n      cbartext.innerHTML = `${i}`;\n      cbarcontainer.appendChild(this.bars[i]);\n      cbarcontainer.appendChild(cbartext);\n      this.el.appendChild(cbarcontainer);\n    }\n  }\n\n  cleanup() {\n    while (this.el.firstChild) {\n      this.el.removeChild(this.el.firstChild);\n    }\n  }\n\n  update(probabilities, highlighted = -1) {\n    for (let i = 0; i < 10; i += 1) {\n      this.bars[i].dataset.probability = probabilities[i];\n      this.bars[i].style = `--probability: ${probabilities[i]}`;\n      this.bars[i].classList.toggle('highlighted', i === highlighted);\n    }\n  }\n}\n","/* globals tf */\nimport Paint from './Paint.js';\nimport { MnistData } from './MnistData.js';\nimport NeuralNetwork from './NeuralNetwork.js';\nimport ValidationPreview from './ValidationPreview.js';\nimport TrainingVisualization from './TrainingVisualization.js';\n\nexport default class Controller {\n  constructor(config) {\n    this.config = config;\n    this.data = new MnistData();\n    this.dataloaded = false;\n    this.testpaint = true;\n  }\n\n  async initIntroPaint(paintel) {\n    if (!this.trainedmodel) {\n      this.trainedmodel = await tf.loadLayersModel(this.config.modelPath);\n    }\n    this.paint = new Paint(\n      paintel,\n      this.trainedmodel,\n      0.5,\n      false,\n      this.config.paintClearTimeout);\n  }\n\n  async loadData() {\n    if (!this.trainedmodel) {\n      this.trainedmodel = await tf.loadLayersModel(this.config.modelPath);\n    }\n    if (!this.dataloaded) {\n      await this.data.load();\n      this.dataloaded = true;\n    }\n  }\n\n  async initTrainingEnvironment(els) {\n    await this.loadData();\n    this.trainingViz = new TrainingVisualization(els);\n    this.vp = new ValidationPreview(this.data, els);\n    this.nn = new NeuralNetwork({\n      trainingCallback: async (trainXs, trainYs) => {\n        await this.trainingViz.setCurrentTraining(trainXs, trainYs);\n      },\n      batchCallback: (trainingImageCount) => {\n        els.trainingProgress.innerHTML = trainingImageCount;\n      },\n      modelUpdateCallback: (model) => {\n        this.vp.updateValidationImages(model);\n        this.vp.updateAccuracy(model);\n      },\n    });\n    this.trainingViz.setNeuralNetwork(this.nn);\n\n    this.paint = new Paint(\n      els.paint,\n      this.nn.model,\n      0,\n      this.trainingViz,\n      this.config.paintClearTimeout\n    );\n\n    await this.vp.initValidationImages(els);\n    // this.nn might have been deleted because in the meanwhile the slide has been skipped\n    if (this.nn) {\n      this.vp.updateValidationImages(this.nn.model);\n      this.vp.updateAccuracy(this.nn.model);\n    }\n  }\n\n  resetNetwork(modelid, optimizerid, learningRate, activation) {\n    if (this.nn) {\n      this.nn.init(modelid, optimizerid, learningRate, activation);\n      this.paint.model = this.nn.model;\n    }\n  }\n\n  async startTraining() {\n    this.clearDelayedTrainStepPreview();\n    this.testpaint = false;\n    if (this.nn) {\n      await this.nn.train(this.data);\n    }\n  }\n\n  async pauseTraining(cb) {\n    if (this.nn) {\n      await this.nn.pauseTraining();\n      this.delayedTrainStepPreview(cb);\n    }\n  }\n\n  async singleStep(cb) {\n    if (this.nn) {\n      this.testpaint = false;\n      await this.nn.trainSingleStep(this.data);\n      this.delayedTrainStepPreview(cb);\n    }\n  }\n\n  async resetTraining(els) {\n    await this.pauseTraining();\n    this.cleanupValidationPreview();\n    this.cleanupPaint();\n    this.cleanupNetwork();\n    await this.initTrainingEnvironment(els);\n    this.testpaint = true;\n  }\n\n  delayedTrainStepPreview(cb) {\n    this.clearDelayedTrainStepPreview();\n    this.traintimeout = setTimeout(() => {\n      this.testpaint = true;\n      if (this.paint) this.paint.predict();\n      if (cb) cb();\n    }, this.config.lastTrainStepTimeout * 1000);\n  }\n\n  clearDelayedTrainStepPreview() {\n    if (this.traintimeout) {\n      clearTimeout(this.traintimeout);\n    }\n  }\n\n  toggleTraining(cb) {\n    this.clearDelayedTrainStepPreview();\n    if (this.nn) {\n      this.nn.toggleTraining(this.data);\n      this.testpaint = false;\n      if (!this.nn.training) {\n        this.delayedTrainStepPreview(cb);\n      }\n    }\n  }\n\n  cleanupNetwork() {\n    if (this.nn) {\n      this.nn.cleanup();\n      delete this.nn;\n    }\n  }\n\n  cleanupValidationPreview() {\n    if (this.vp) {\n      this.vp.cleanup();\n      delete this.vp;\n    }\n  }\n\n  cleanupPaint() {\n    if (this.paint) {\n      this.paint.cleanup();\n      delete this.paint;\n    }\n  }\n\n  addAccuracyCallback(acc, cb) {\n    this.vp.addAccuracyCallback(acc, cb);\n  }\n}\n","/* eslint-disable no-underscore-dangle,no-param-reassign */\n/*\nwritten by Christian Stussak, licensed under the Apache License 2.0.\ncopy from https://github.com/IMAGINARY/content-slider/blob/master/js/IdleDetector.js\n*/\n\nconst defaultConstructorParams = {\n  eventTypes: [\n    'pointerdown',\n    // 'pointermove',\n    'pointerup',\n    'pointercancel',\n    'keydown',\n    'keyup',\n  ],\n  domElement: document,\n};\n\nexport default class IdleDetector {\n  constructor(params = {}) {\n    const {\n      eventTypes,\n      domElement,\n    } = Object.assign(Object.assign({}, defaultConstructorParams), params);\n    this._eventTypes = eventTypes;\n    this._domElement = domElement;\n    this._timeOfLastEvent = 0;\n    this._maxId = 0;\n    this._timers = {};\n    this._nonIdleHandler = () => {\n      this.reset();\n    };\n  }\n\n  _init() {\n    this._eventTypes.forEach(type => this._domElement.addEventListener(\n      type, this._nonIdleHandler, true\n    ));\n  }\n\n  _deinit() {\n    this._eventTypes.forEach(type => this._domElement.removeEventListener(\n      type, this._nonIdleHandler, true\n    ));\n  }\n\n  _setTimeoutInternal(repeat, func, timeoutDelay, ...args) {\n    // event handlers should only be active if there are pending timeouts\n    if (Object.keys(this._timers).length === 0) {\n      this._init();\n    }\n\n    if (typeof timeoutDelay === 'undefined') {\n      timeoutDelay = 0;\n    }\n    this._maxId += 1;\n    const id = this._maxId;\n    const timers = this._timers;\n    const timer = {\n      id,\n      repeat,\n      timeoutDelay,\n      windowTimeoutId: 0,\n      callback() {\n        if (!repeat) {\n          this.delete();\n        }\n        func(...args);\n      },\n      reset() {\n        window.clearTimeout(this.windowTimeoutId);\n        this.windowTimeoutId = window.setTimeout(this.callback.bind(this), this.timeoutDelay);\n      },\n      clear() {\n        window.clearTimeout(this.windowTimeoutId);\n        this.windowTimeoutId = 0;\n      },\n      delete() {\n        this.clear();\n        delete timers[id];\n      },\n    };\n    timers[id] = timer;\n    timer.reset();\n    return id;\n  }\n\n  _setIntervalInternal(repeat, func, intervalDelay, timeoutDelay, ...args) {\n    // event handlers should only be active if there are pending timeouts\n    if (Object.keys(this._timers).length === 0) {\n      this._init();\n    }\n\n    if (typeof intervalDelay === 'undefined') {\n      intervalDelay = 0;\n    }\n    if (typeof timeoutDelay === 'undefined') {\n      timeoutDelay = intervalDelay;\n    }\n    this._maxId += 1;\n    const id = this._maxId;\n    const timers = this._timers;\n    const timer = {\n      id,\n      repeat,\n      hasFired: false,\n      timeoutDelay,\n      intervalDelay,\n      windowTimeoutId: 0,\n      windowIntervalId: 0,\n      callback() {\n        func(...args)\n        this.hasFired = true;\n      },\n      intervalCallback() {\n        this.windowIntervalId = window.setInterval(this.callback, this.intervalDelay);\n        this.callback();\n      },\n      reset() {\n        this.clear();\n        if (!this.repeat && this.hasFired) {\n          this.delete();\n        } else {\n          this.windowTimeoutId = window.setTimeout(\n            this.intervalCallback.bind(this), this.timeoutDelay\n          );\n        }\n      },\n      clear() {\n        window.clearTimeout(this.windowTimeoutId);\n        window.clearInterval(this.windowIntervalId);\n        this.windowTimeoutId = 0;\n        this.windowIntervalId = 0;\n      },\n      delete() {\n        this.clear();\n        delete timers[id];\n      },\n    };\n    timers[id] = timer;\n    timer.reset();\n    return id;\n  }\n\n  setTimeout(func, timeoutDelay, ...args) {\n    return this._setTimeoutInternal(true, func, timeoutDelay, ...args);\n  }\n\n  setTimeoutOnce(func, timeoutDelay, ...args) {\n    return this._setTimeoutInternal(false, func, timeoutDelay, ...args);\n  }\n\n  setInterval(func, intervalDelay, timeoutDelay, ...args) {\n    return this._setIntervalInternal(true, func, intervalDelay, timeoutDelay, ...args);\n  }\n\n  setIntervalOnce(func, intervalDelay, timeoutDelay, ...args) {\n    return this._setIntervalInternal(false, func, intervalDelay, timeoutDelay, ...args);\n  }\n\n  clearTimeout(id) {\n    if (typeof this._timers[id] !== 'undefined') {\n      this._timers[id].delete();\n    }\n\n    // event handlers should only be active if there are pending timeouts\n    if (Object.keys(this._timers).length === 0) {\n      this._deinit();\n    }\n  }\n\n  clearInterval(id) {\n    this.clearTimeout(id);\n  }\n\n  /**\n   * Interrupt the idle state and restart the timeouts and intervals.\n   */\n  reset() {\n    this._timeOfLastEvent = performance.now();\n    Object.values(this._timers).forEach(timer => timer.reset());\n  }\n\n  /**\n   * Clear all timeouts and intervals.\n   */\n  clear() {\n    Object.values(this._timers).forEach(timer => timer.delete());\n    this._deinit();\n  }\n\n  /**\n   * Return the time in ms since the last interruption of the idle state\n   * if there is at least one active (interval) timeout\n   * registered. Otherwise returns -1;\n   * @returns {number}\n   */\n  getIdleTime() {\n    if (Object.keys(this._timers).length === 0) {\n      return -1;\n    }\n    return performance.now() - this._timeOfLastEvent;\n  }\n}\n","export default class LangSwitcher {\n  constructor(container, config, langChangeCallback) {\n    this.menuVisible = false;\n    this.container = container;\n    this.config = config;\n    this.langChangeCallback = langChangeCallback;\n\n    this.render();\n  }\n\n  render() {\n    this.element = document.createElement('div');\n    this.element.classList.add('lang-switcher');\n\n    this.trigger = document.createElement('button');\n    this.trigger.setAttribute('type', 'button');\n    this.trigger.classList.add('lang-switcher-trigger');\n    this.element.appendChild(this.trigger);\n\n    const mask = document.createElement('div');\n    mask.classList.add('lang-switcher-menu-mask');\n    this.element.appendChild(mask);\n\n    this.menu = document.createElement('ul');\n    this.menu.classList.add('lang-switcher-menu');\n    mask.appendChild(this.menu);\n\n    Object.entries(this.config.languages).forEach(([code, name]) => {\n      const item = document.createElement(('li'));\n      const link = document.createElement('button');\n      link.setAttribute('type', 'button');\n      link.innerText = name;\n      link.addEventListener('pointerdown', (ev) => {\n        this.langChangeCallback(code);\n        ev.preventDefault();\n      });\n      item.appendChild(link);\n      this.menu.appendChild(item);\n    });\n\n    this.container.appendChild(this.element);\n\n    this.menu.style.bottom = `${this.menu.clientHeight * -1 - 10}px`;\n\n    window.document.addEventListener('pointerdown', (ev) => {\n      if (this.menuVisible) {\n        this.hideMenu();\n      }\n    });\n    this.trigger.addEventListener('pointerdown', (ev) => {\n      if (!this.menuVisible) {\n        this.showMenu();\n        ev.stopPropagation();\n      }\n    });\n  }\n\n  showMenu() {\n    this.menuVisible = true;\n    this.menu.classList.add('visible');\n  }\n\n  hideMenu() {\n    this.menuVisible = false;\n    this.menu.classList.remove('visible');\n  }\n}\n","/**\n * @license\n * Copyright 2018 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nconst IMAGE_SIZE = 784;\nconst NUM_CLASSES = 10;\nconst NUM_DATASET_ELEMENTS = 65000;\n\nconst NUM_TRAIN_ELEMENTS = NUM_DATASET_ELEMENTS*0.8 | 0; //80% TODO make this custoumizeable\nconst NUM_TEST_ELEMENTS = NUM_DATASET_ELEMENTS - NUM_TRAIN_ELEMENTS;\n\nconst MNIST_IMAGES_SPRITE_PATH =\n    'assets/mnist/mnist_images.png';\nconst MNIST_LABELS_PATH =\n    'assets/mnist/mnist_labels_uint8';\n\n/**\n * A class that fetches the sprited MNIST dataset and returns shuffled batches.\n *\n * NOTE: This will get much easier. For now, we do data fetching and\n * manipulation manually.\n */\nexport class MnistData {\n  constructor(imagePath = MNIST_IMAGES_SPRITE_PATH, labelPath = MNIST_LABELS_PATH) {\n    this.shuffledTrainIndex = 0;\n    this.shuffledTestIndex = 0;\n    this.imagePath = imagePath;\n    this.labelPath = labelPath;\n  }\n\n  async load() {\n    // Make a request for the MNIST sprited image.\n    const img = new Image();\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d', { willReadFrequently: true });\n    const imgRequest = new Promise((resolve, reject) => {\n      img.crossOrigin = '';\n      img.onload = () => {\n        img.width = img.naturalWidth;\n        img.height = img.naturalHeight;\n\n        const datasetBytesBuffer =\n            new ArrayBuffer(NUM_DATASET_ELEMENTS * IMAGE_SIZE * 4);\n\n        const chunkSize = 5000;\n        canvas.width = img.width;\n        canvas.height = chunkSize;\n\n        for (let i = 0; i < NUM_DATASET_ELEMENTS / chunkSize; i++) {\n          const datasetBytesView = new Float32Array(\n              datasetBytesBuffer, i * IMAGE_SIZE * chunkSize * 4,\n              IMAGE_SIZE * chunkSize);\n          ctx.drawImage(\n              img, 0, i * chunkSize, img.width, chunkSize, 0, 0, img.width,\n              chunkSize);\n\n          const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n          for (let j = 0; j < imageData.data.length / 4; j++) {\n            // All channels hold an equal value since the image is grayscale, so\n            // just read the red channel.\n            datasetBytesView[j] = imageData.data[j * 4] / 255;\n          }\n        }\n        this.datasetImages = new Float32Array(datasetBytesBuffer);\n\n        resolve();\n      };\n      img.src = this.imagePath;\n    });\n\n    const labelsRequest = fetch(this.labelPath);\n    const [imgResponse, labelsResponse] =\n        await Promise.all([imgRequest, labelsRequest]);\n\n    this.datasetLabels = new Uint8Array(await labelsResponse.arrayBuffer());\n    // Create shuffled indices into the train/test set for when we select a\n    // random dataset element for training / validation.\n    this.trainIndices = tf.util.createShuffledIndices(NUM_TRAIN_ELEMENTS);\n    this.testIndices = tf.util.createShuffledIndices(NUM_TEST_ELEMENTS);\n\n    // Slice the the images and labels into train and test sets.\n    this.trainImages =\n        this.datasetImages.slice(0, IMAGE_SIZE * NUM_TRAIN_ELEMENTS);\n    this.testImages = this.datasetImages.slice(IMAGE_SIZE * NUM_TRAIN_ELEMENTS);\n    this.trainLabels =\n        this.datasetLabels.slice(0, NUM_CLASSES * NUM_TRAIN_ELEMENTS);\n    this.testLabels =\n        this.datasetLabels.slice(NUM_CLASSES * NUM_TRAIN_ELEMENTS);\n  }\n\n  nextTrainBatch(batchSize) {\n    return this.nextBatch(\n        batchSize, [this.trainImages, this.trainLabels], () => {\n          this.shuffledTrainIndex =\n              (this.shuffledTrainIndex + 1) % this.trainIndices.length;\n          return this.trainIndices[this.shuffledTrainIndex];\n        });\n  }\n\n  nextTestBatch(batchSize) {\n    return this.nextBatch(batchSize, [this.testImages, this.testLabels], () => {\n      this.shuffledTestIndex =\n          (this.shuffledTestIndex + 1) % this.testIndices.length;\n      return this.testIndices[this.shuffledTestIndex];\n    });\n  }\n\n  nextBatch(batchSize, data, index) {\n    const batchImagesArray = new Float32Array(batchSize * IMAGE_SIZE);\n    const batchLabelsArray = new Uint8Array(batchSize * NUM_CLASSES);\n\n    for (let i = 0; i < batchSize; i++) {\n      const idx = index();\n\n      const image =\n          data[0].slice(idx * IMAGE_SIZE, idx * IMAGE_SIZE + IMAGE_SIZE);\n      batchImagesArray.set(image, i * IMAGE_SIZE);\n\n      const label =\n          data[1].slice(idx * NUM_CLASSES, idx * NUM_CLASSES + NUM_CLASSES);\n      batchLabelsArray.set(label, i * NUM_CLASSES);\n    }\n\n    const xs = tf.tensor2d(batchImagesArray, [batchSize, IMAGE_SIZE]);\n    const labels = tf.tensor2d(batchLabelsArray, [batchSize, NUM_CLASSES]);\n\n    return {xs, labels};\n  }\n}\n","/* eslint-disable no-await-in-loop */\n/* jshint esversion: 8 */\n/* globals tf */\n\nexport default class NeuralNetwork {\n  constructor(options) {\n    this.options = Object.assign({}, {\n      trainingCallback: null,\n      batchCallback: null,\n      modelUpdateCallback: null,\n      modelUpdateAsyncCallback: null,\n    }, options);\n    this.training = false;\n    this.init();\n  }\n\n  init(modelid = 'dense', optimizerid = 'adam', learningRate = 0.001, activation = 'relu') {\n    // eslint-disable-next-line no-console\n    console.log(`Setting up NN model=${modelid} optimizer=${optimizerid} learningrate=${learningRate} activation=${activation}`);\n    this.modelid = modelid;\n    this.trainedimages = 0;\n    this.lastrainedimages = 0;\n    this.pausecbs = [];\n\n    if (this.options.batchCallback) {\n      this.options.batchCallback(this.trainedimages);\n    }\n\n    // delete old model if it has been existing\n    if (this.model) {\n      this.model.dispose();\n    }\n\n    // create model\n    this.model = tf.sequential();\n    const { model } = this;\n\n    const IMAGE_WIDTH = 28;\n    const IMAGE_HEIGHT = 28;\n    const IMAGE_CHANNELS = 1;\n\n    if (modelid === 'cnn') {\n      // CNN\n      // In the first layer of our convolutional neural network we have\n      // to specify the input shape. Then we specify some parameters for\n      // the convolution operation that takes place in this layer.\n      model.add(tf.layers.conv2d({\n        inputShape: [IMAGE_WIDTH, IMAGE_HEIGHT, IMAGE_CHANNELS],\n        kernelSize: 5,\n        filters: 8,\n        strides: 1,\n        activation,\n        kernelInitializer: 'varianceScaling',\n      }));\n\n      // The MaxPooling layer acts as a sort of downsampling using max values\n      // in a region instead of averaging.\n      model.add(tf.layers.maxPooling2d({\n        poolSize: [2, 2],\n        strides: [2, 2],\n      }));\n\n      // Repeat another conv2d + maxPooling stack.\n      // Note that we have more filters in the convolution.\n      model.add(tf.layers.conv2d({\n        kernelSize: 5,\n        filters: 16,\n        strides: 1,\n        activation,\n        kernelInitializer: 'varianceScaling',\n      }));\n      model.add(tf.layers.maxPooling2d({\n        poolSize: [2, 2],\n        strides: [2, 2],\n      }));\n\n      // Now we flatten the output from the 2D filters into a 1D vector to prepare\n      // it for input into our last layer. This is common practice when feeding\n      // higher dimensional data to a final classification output layer.\n      model.add(tf.layers.flatten());\n    } else if (modelid === 'dense') {\n      model.add(\n        tf.layers.flatten({\n          inputShape: [IMAGE_WIDTH, IMAGE_HEIGHT, IMAGE_CHANNELS],\n        })\n      );\n\n      model.add(tf.layers.dense({\n        units: 100,\n        activation,\n        kernelInitializer: 'varianceScaling',\n      }));\n    } else if (modelid === 'nohidden') {\n      model.add(\n        tf.layers.flatten({\n          inputShape: [IMAGE_WIDTH, IMAGE_HEIGHT, IMAGE_CHANNELS],\n        })\n      );\n    }\n\n    // Our last layer is a dense layer which has 10 output units, one for each\n    // output class (i.e. 0, 1, 2, 3, 4, 5, 6, 7, 8, 9).\n    const NUM_OUTPUT_CLASSES = 10;\n    model.add(tf.layers.dense({\n      units: NUM_OUTPUT_CLASSES,\n      kernelInitializer: 'varianceScaling',\n      activation: 'softmax',\n    }));\n\n    // Choose an optimizer, loss function and accuracy metric,\n    // then compile and return the model\n    const optimizer = (optimizerid === 'adam') ? tf.train.adam(learningRate) : tf.train.sgd(learningRate);\n    // tf.train.adam(learningRate);\n\n    model.compile({\n      optimizer,\n      loss: 'categoricalCrossentropy',\n      // optimizer: 'sgd',\n      // loss: 'meanSquaredError',\n      metrics: ['accuracy'],\n    });\n\n    return model;\n  }\n\n  async trainByBatchFromData(data, TRAIN_DATA_SIZE, BATCH_SIZE) {\n    if (TRAIN_DATA_SIZE === 1 || BATCH_SIZE === 1) {\n      tf.setBackend('cpu');\n      // fitting with single training-data results in NaNs when WebGL-backend is used\n      // for unknown reasons. Unfortunately, mixing cpu ang webgl backend changes the\n      // training in some way: Way more input images are required to obtain same accuracy\n    }\n    const { model } = this;\n    const [trainXs, trainYs] = tf.tidy(() => {\n      const d = data.nextTrainBatch(TRAIN_DATA_SIZE);\n      return [\n        d.xs.reshape([TRAIN_DATA_SIZE, 28, 28, 1]),\n        d.labels,\n      ];\n    });\n\n    if (this.options.trainingCallback) {\n      await this.options.trainingCallback(trainXs, trainYs);\n    }\n\n    await model.fit(trainXs, trainYs, {\n      batchSize: BATCH_SIZE,\n      callbacks: {\n        onEpochEnd: async () => {},\n        onBatchEnd: async () => {\n          this.trainedimages += BATCH_SIZE;\n          if (this.options.batchCallback) {\n            this.options.batchCallback(this.trainedimages);\n          }\n        },\n      },\n    });\n    tf.dispose(trainXs);\n    tf.dispose(trainYs);\n\n    if (TRAIN_DATA_SIZE === 1 || BATCH_SIZE === 1) {\n      tf.setBackend('webgl');\n      // fitting with single training-data results in NaNs when WebGL-backend\n      // is used for unknown reasons\n    }\n  }\n\n  async trainSingleStep(data) {\n    await this.trainByBatchFromData(data, 1, 1);\n    if (this.options.modelUpdateCallback) {\n      this.options.modelUpdateCallback(this.model);\n    }\n    if (this.options.modelUpdateAsyncCallback) {\n      await this.options.modelUpdateAsyncCallback(this.model);\n    }\n  }\n\n  async train(data) {\n    this.training = true;\n\n    while (this.training) {\n      // start slower in beginning, increase step size with time\n      // const BATCH_SIZE = 1 << (Math.max(4, Math.min(8, this.trainedimages / 20 | 0)));\n      // a sequence of increasing powers of two\n\n      // a constant BATCH_SIZE and TRAIN_DATA_SIZE increases the speed of convergence :/.\n      const BATCH_SIZE = 32;\n      const TRAIN_DATA_SIZE = 32; // *Math.min(8, Math.max(1, this.trainedimages / 40 | 0));\n\n      await this.trainByBatchFromData(data, BATCH_SIZE, TRAIN_DATA_SIZE);\n\n      if (this.trainedimages\n        > this.lastrainedimages + Math.min(1000, 0.3 * this.trainedimages)\n        || this.trainedimages < 250) {\n        if (this.options.modelUpdateCallback) {\n          this.options.modelUpdateCallback(this.model);\n        }\n        if (this.options.modelUpdateAsyncCallback) {\n          await this.options.modelUpdateAsyncCallback(this.model);\n        }\n        if ((this.trainedimages < 100)) {\n          // sleep some time per image\n          await new Promise(resolve => setTimeout(\n            resolve,\n            (1000 / (5 + 4 * this.trainedimages)) * (this.trainedimages - this.lastrainedimages)\n          ));\n        }\n        this.lastrainedimages = this.trainedimages;\n      }\n    }\n\n    while (this.pausecbs.length > 0) {\n      (this.pausecbs.pop())();\n    }\n  }\n\n  addPauseCallback(cb) {\n    this.pausecbs.push(cb);\n  }\n\n  pauseTrainingNow() {\n    this.training = false;\n  }\n\n  pauseTraining() {\n    return new Promise((resolve) => {\n      if (this.training) {\n        this.addPauseCallback(resolve);\n        this.training = false;\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  isTraining() {\n    return this.training;\n  }\n\n  async toggleTraining(data) {\n    if (this.training) {\n      await this.pauseTraining();\n    } else {\n      await this.train(data);\n    }\n  }\n\n  cleanup() {\n    this.model.dispose();\n    this.trainedimages = 0;\n    this.lastrainedimages = 0;\n  }\n}\n","/* globals tf */\n/* eslint-disable no-bitwise */\nimport BarChart from './BarChart.js';\n\nlet SCALE_FACTOR = 9;\nlet LINEWIDTH = 2 * SCALE_FACTOR;\n\nexport default class Paint {\n  constructor(el, model, outputThreshold, nwvis = false, clearTimeoutTime = 2.2) {\n    this.clearTimeoutTime = clearTimeoutTime;\n    this.drawingChanged = true;\n    this.model = model;\n    this.nwvis = nwvis;\n    this.barchart = null;\n    this.drawingActive = true;\n    this.clearOnInput = false;\n\n    this.outputThreshold = outputThreshold;\n\n    // last known position\n    this.pos = {\n      x: 0,\n      y: 0,\n    };\n\n    this.createUI(el);\n    this.empty = true;\n    this.isdown = false;\n    this.pointerId = -1;\n  }\n\n  addEventListeners() {\n    this.eventfunctions = {\n      pointerdown: ((e) => {\n        if (!this.isdown && this.drawingActive) {\n          if (this.clearOnInput) {\n            this.clear();\n          }\n          this.removeClearTimeout();\n          this.setPosition(e);\n          this.isdown = true;\n          this.pointerId = e.pointerId;\n        }\n      }),\n      pointermove: ((e) => {\n        if (this.isdown && this.drawingActive && (this.pointerId === e.pointerId)) {\n          this.draw(e);\n        }\n      }),\n      pointerup: ((e) => {\n        if (this.drawingActive && (this.pointerId === e.pointerId)) {\n          this.setClearTimeout();\n          this.isdown = false;\n        }\n      }),\n      pointerleave: ((e) => {\n        if (this.drawingActive && (this.pointerId === e.pointerId)) {\n          this.setClearTimeout();\n          this.isdown = false;\n        }\n      }),\n      pointercancel: ((e) => {\n        if (this.drawingActive && (this.pointerId === e.pointerId)) {\n          this.setClearTimeout();\n          this.isdown = false;\n        }\n      }),\n    };\n\n    for (const eventname in this.eventfunctions) {\n      this.drawcanvas.addEventListener(eventname, this.eventfunctions[eventname], {\n        passive: true,\n      });\n    }\n  }\n\n  removeEventListeners() {\n    for (const eventname in this.eventfunctions) {\n      this.drawcanvas.removeEventListener(eventname, this.eventfunctions[eventname]);\n    }\n  }\n\n  createUI(el) {\n    this.drawcanvas = el.querySelector('.drawcanvas');\n    this.normalizecanvas = el.querySelector('.normalizecanvas') || document.createElement('canvas');\n    this.outputbars = el.querySelector('.bars');\n    this.outputdigit = el.querySelector('.digit');\n    this.inputbox = el.querySelector('.input.box');\n\n    this.addEventListeners();\n\n    const { normalizecanvas, drawcanvas } = this;\n\n    normalizecanvas.width = 28;\n    normalizecanvas.height = 28;\n\n    const updateDimensions = () => {\n      SCALE_FACTOR = Math.floor(this.drawcanvas.clientWidth / 28) - 1;\n      LINEWIDTH = 2 * SCALE_FACTOR;\n      drawcanvas.width = this.drawcanvas.clientWidth;\n      drawcanvas.height = this.drawcanvas.clientWidth;\n    };\n    updateDimensions();\n    window.onresize = () => {\n      updateDimensions();\n    };\n\n    this.drawcontext = this.drawcanvas.getContext('2d', { willReadFrequently: true });\n    this.normalizecontext = this.normalizecanvas.getContext('2d', { willReadFrequently: true });\n    // const { drawcontext, normalizecontext } = this;\n    //  normalizecanvas.style.width = 28 * SCALE_FACTOR + 'px';\n    //  normalizecanvas.style.height = 28 * SCALE_FACTOR + 'px';\n    //  normalizecanvas.style.imageRendering = 'pixelated';\n    /*\n        const resetbutton = document.createElement(\"button\");\n        this.resetbutton = resetbutton;\n        this.resetbutton.style.visibility = 'hidden';\n\n        resetbutton.innerHTML = \"reset\";\n        resetbutton.addEventListener('click', () => {\n          this.drawcontext.fillRect(0, 0, this.drawcanvas.width, this.drawcanvas.height);\n          this.normalize(100);\n          this.predict();\n          this.resetbutton.style.visibility = 'hidden';\n        });\n\n        this.drawcanvas.parentNode.insertBefore(resetbutton, this.drawcanvas);\n        this.resetbutton.style.position = \"absolute\";\n        this.resetbutton.style.zIndex = 10;\n    */\n    if (this.outputbars) {\n      this.barchart = new BarChart(this.outputbars);\n    }\n\n    this.clear();\n  }\n\n\n  setPosition(e) {\n    const rect = this.drawcanvas.getBoundingClientRect();\n    this.pos.x = (e.clientX - rect.left);\n    this.pos.y = (e.clientY - rect.top);\n    return true;\n  }\n\n  removeClearTimeout() {\n    if (this.clearTimeout) {\n      clearTimeout(this.clearTimeout);\n    }\n    return true;\n  }\n\n  setClearTimeout() {\n    this.removeClearTimeout(); // remove previous clearTimeouts\n    // clean up everything after specified time\n    this.clearTimeout = setTimeout(() => {\n      this.clear();\n    }, this.clearTimeoutTime * 1000);\n    return true;\n  }\n\n  setClearOnInput() {\n    this.clearOnInput = true;\n  }\n\n  draw(e) {\n    this.removeClearTimeout();\n    const ox = this.pos.x;\n    const oy = this.pos.y;\n    this.setPosition(e);\n    const nx = this.pos.x;\n    const ny = this.pos.y;\n    if (Math.abs(nx - ox) + Math.abs(ny - oy) < 3) {\n      this.pos.x = ox;\n      this.pos.y = oy;\n      return;\n    }\n    this.hidePlaceholder();\n    this.empty = false;\n    this.drawcontext.beginPath(); // begin\n    this.drawcontext.lineWidth = LINEWIDTH;\n    this.drawcontext.lineCap = 'round';\n    this.drawcontext.strokeStyle = 'white';\n\n    this.drawcontext.moveTo(ox, oy); // from\n    this.setPosition(e);\n    this.drawcontext.lineTo(nx, ny); // to\n\n    this.drawcontext.stroke(); // draw it!\n\n    this.normalizecontext.fillStyle = 'black';\n    this.normalizecontext.fillRect(0, 0, this.normalizecanvas.width, this.normalizecanvas.height);\n\n    this.drawingChanged = true;\n    this.normalize(LINEWIDTH);\n    this.predict();\n    // this.resetbutton.style.visibility = 'visible';\n  }\n\n  // normalize image\n  normalize(SKIPFACTOR) {\n    let centerx = 0;\n    let centery = 0;\n    let top = 1000;\n    let bottom = -1000;\n    let left = 1000;\n    let right = -1000;\n    const imgData = this.drawcontext.getImageData(\n      0, 0, this.drawcanvas.width, this.drawcanvas.height\n    );\n    const { data } = imgData;\n    let totalweight = 0;\n    for (let i = 0; i < data.length; i += 4 * SKIPFACTOR) {\n      const x = (i / 4) % this.drawcanvas.width;\n      const y = ((i / 4) / (this.drawcanvas.width)) | 0;\n      totalweight += data[i];\n      centerx += (data[i]) * x;\n      centery += (data[i]) * y;\n\n      if (data[i] > 0) {\n        top = Math.min(top, y);\n        bottom = Math.max(bottom, y);\n        left = Math.min(left, x);\n        right = Math.max(right, x);\n      }\n    }\n    if (totalweight > 0) {\n      centerx /= totalweight;\n      centery /= totalweight;\n\n      const boxsize = Math.max(right - left, bottom - top);\n\n      // according to MNIST normalization:\n      /*\n      The original black and white (bilevel) images from NIST were size normalized\n      to fit in a 20x20 pixel box while preserving their aspect ratio. The\n      resulting images contain grey levels as a result of the anti-aliasing\n      technique used by the normalization algorithm. the images were centered\n      in a 28x28 image by computing the center of mass of the pixels, and\n      translating the image so as to position this point at the center of the 28x28 field.\n      */\n      this.normalizecontext.drawImage(\n        this.drawcanvas,\n        left, top,\n        boxsize, boxsize,\n        14 + (20 / boxsize) * (left - centerx),\n        14 + (20 / boxsize) * (top - centery),\n        20, 20\n      );\n    } else {\n      this.normalizecontext.fillRect(0, 0, this.normalizecanvas.width, this.normalizecanvas.height);\n    }\n\n    return true;\n  }\n\n  predict() {\n    if (this.model && this.normalizecanvas && this.drawingChanged) { // && newFrame rendered TODO?\n      const [probabilities, predicted] = tf.tidy(() => {\n        const imageTensor = tf.browser\n          .fromPixels(this.normalizecanvas, 1)\n          .toFloat()\n          .mul(tf.scalar(1 / 255))\n          .clipByValue(0, 1)\n          .reshape([1, 28, 28, 1]);\n        if (this.nwvis) {\n          this.nwvis.show(imageTensor,\n            this.normalizecontext.getImageData(\n              0, 0,\n              this.normalizecanvas.width, this.normalizecanvas.height\n            ).data.filter((d, k) => (k % 4 === 0)));\n        }\n        const result = this.model.predict(imageTensor);\n        return [\n          result.dataSync(),\n          result.argMax([-1]).dataSync(),\n        ];\n      });\n\n      if (this.barchart) {\n        this.barchart.update(probabilities, predicted);\n      }\n\n      if (this.outputdigit) {\n        this.outputdigit.innerHTML = (!this.empty && probabilities[predicted] > this.outputThreshold) ? predicted : '?';\n        this.outputdigit.parentElement.classList.toggle('solved', probabilities[predicted] > this.outputThreshold);\n      }\n    }\n    return true;\n  }\n\n  swapModel(model) {\n    this.model = model;\n    this.predict();\n  }\n\n  clear() {\n    this.clearOnInput = false;\n    this.drawcontext.fillRect(0, 0, this.drawcanvas.width, this.drawcanvas.height);\n    this.empty = true;\n    this.normalize(100);\n    this.predict();\n    this.showPlaceholder();\n  }\n\n  cleanup() {\n    this.clear();\n    this.removeEventListeners();\n\n    // this.predict();\n    // this.resetbutton.style.visibility = 'hidden';\n\n    if (this.barchart) {\n      this.barchart.cleanup();\n    }\n  }\n\n  showPlaceholder() {\n    this.inputbox.classList.add('background');\n  }\n\n  hidePlaceholder() {\n    this.inputbox.classList.remove('background');\n  }\n\n  disableDrawing() {\n    this.drawingActive = false;\n    this.isdown = false;\n  }\n\n  enableDrawing() {\n    this.drawingActive = true;\n  }\n}\n","/* eslint-disable no-bitwise,class-methods-use-this,no-param-reassign */\nimport Slide from './slide.js';\n\nexport default class SlideShow {\n  constructor(controller) {\n    this.createEventMask();\n    this.controller = controller;\n    this.slides = Array.from(document.querySelectorAll('[data-slide]'))\n      .map(element => element.getAttribute('data-slide'));\n    this.currentSlide = 0;\n    this.currentSlideController = null;\n\n    window.onhashchange = async () => {\n      this.maskEvents();\n      await this.doSlideChange();\n      this.unmaskEvents();\n    };\n    this.doSlideChange();\n\n    window.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'ArrowLeft':\n          this.goPrevious();\n          break;\n        case 'ArrowRight':\n          this.goNext();\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  createEventMask() {\n    this.eventMask = document.createElement('div');\n    this.eventMask.style.position = 'absolute';\n    this.eventMask.style.top = '0';\n    this.eventMask.style.left = '0';\n    this.eventMask.style.width = '100%';\n    this.eventMask.style.height = '100%';\n    this.eventMask.style.zIndex = '1000000';\n    this.eventMask.style.pointerEvents = 'all';\n    this.eventMask.style.backgroundColor = 'transparent';\n    this.eventMask.style.display = 'none';\n    window.document.body.appendChild(this.eventMask);\n  }\n\n  maskEvents() {\n    this.eventMask.style.display = 'block';\n  }\n\n  unmaskEvents() {\n    this.eventMask.style.display = 'none';\n  }\n\n  /**\n   * Go to the first slide\n   */\n  goFirst() {\n    if (this.slides.length > 0) {\n      this.goTo(this.slides[0]);\n    }\n  }\n\n  /**\n   * Go the net slide\n   */\n  goNext() {\n    const currentID = this.slides.indexOf(this.getCurrentSlide());\n    if (currentID < this.slides.length - 1) {\n      this.goTo(this.slides[currentID + 1]);\n    }\n  }\n\n  /**\n   * Go to the previous slide\n   */\n  goPrevious() {\n    const currentID = this.slides.indexOf(this.getCurrentSlide());\n    if (currentID > 0) {\n      this.goTo(this.slides[currentID - 1]);\n    }\n  }\n\n  /**\n   * Go to the requested slide\n   * @param {string} id\n   */\n  goTo(id) {\n    if (this.slides.includes(id)) {\n      window.location.hash = id;\n    }\n  }\n\n  /**\n   * Returns the ID of the current slide\n   * @return {null|string}\n   */\n  getCurrentSlide() {\n    const hash = window.location.hash.substring(1);\n    if (this.slides.length === 0) {\n      return null;\n    }\n\n    return (hash !== '' ? hash : this.slides[0]);\n  }\n\n  /**\n   * Handles a slide change by modifying the view and navigation\n   *\n   * @private\n   */\n  async doSlideChange() {\n    const currentSlide = this.getCurrentSlide();\n\n    document.querySelector('.footer .navigation').childNodes.forEach((btn) => {\n      btn.classList.remove('selected');\n    });\n\n    this.slides.forEach((slide) => {\n      const element = document.querySelector(`[data-slide=${slide}]`);\n      if (element.onExit && element.open) {\n        element.onExit(this.controller);\n      }\n      element.open = false;\n      element.classList.remove('visible');\n      element.classList.remove('entering');\n    });\n\n    if (this.currentSlideController) {\n      await this.currentSlideController.onExit();\n      this.currentSlideController = null;\n    }\n\n    const element = document.querySelector(`[data-slide=${currentSlide}]`);\n    if (element) {\n      const nav = element.getAttribute('data-slide-nav') || currentSlide;\n      const menuItem = document.querySelector(`.footer .navigation [href='#${nav}']`);\n      if (menuItem) {\n        menuItem.classList.add('selected');\n      }\n\n      element.open = true;\n      element.classList.add('visible');\n      setTimeout(() => {\n        element.classList.add('entering');\n      }, 0);\n      if (element.onEnter) {\n        element.onEnter(this.controller);\n      }\n\n      const SlideClass = Slide.getClass(currentSlide);\n      if (SlideClass) {\n        this.currentSlideController = new SlideClass(element, this.controller);\n        await this.currentSlideController.onEnter();\n      }\n    }\n  }\n}\n","/* globals tf */\n/* eslint-disable class-methods-use-this,no-param-reassign,no-bitwise */\nimport BarChart from './BarChart.js';\n\nconst HEIGHT = 500;\nconst DENSEWIDTH = 380;\nconst XOFFSET = 20;\n\nexport default class TrainingVisualization {\n  constructor(els) {\n    this.els = els;\n\n    this.canvas = this.els.network;\n    const { canvas } = this;\n    canvas.height = canvas.clientHeight;\n    canvas.width = canvas.clientWidth;\n    this.ctx = canvas.getContext('2d');\n\n    this.acanvas = this.els.activations;\n    const { acanvas } = this;\n    acanvas.height = acanvas.clientHeight;\n    acanvas.width = acanvas.clientWidth;\n\n    this.actx = acanvas.getContext('2d');\n\n    this.icanvas = this.els.input;\n    const { icanvas } = this;\n    icanvas.height = icanvas.clientHeight;\n    icanvas.width = icanvas.clientWidth;\n    this.ictx = icanvas.getContext('2d');\n\n    this.barchart = new BarChart(this.els.bars);\n\n    // this.lastvisualization = -1;\n    this.traindigit = document.createElement('canvas');\n    this.traindigit.height = 28;\n    this.traindigit.width = 28;\n  }\n\n  setNeuralNetwork(nn = null) {\n    this.nn = nn;\n    this.currentDigit = new Float32Array(784);\n    this.currentProbabilities = new Float32Array(10);\n    this.lt1 = 0.08;\n    this.lt2 = 0.2;\n\n    this.renderNetwork();\n    this.renderActivations();\n  }\n\n  findthreshold(arr, a, b, target) { // binary search to find good\n    const m = (a + b) / 2;\n    const ccnt = arr.filter(x => x * x > m * m).length;\n    if (b - a < 0.001 || Math.abs(ccnt - target) < target * 0.2) { // correct up to 20%\n      return m;\n    }\n\n    if (ccnt < target) {\n      // to few elements for threshold=m -> threshold should be smaller than m\n      return this.findthreshold(arr, a, m, target);\n    }\n\n    return this.findthreshold(arr, m, b, target);\n  }\n\n\n  drawdenselayer(N, M, weights, x0, y0, width, height, lastthreshold) {\n    const { ctx } = this;\n\n    // takes about 40ms for 784 weights\n    const threshold = this.findthreshold(weights, lastthreshold * 0.8, lastthreshold * 1.2, 200);\n    for (let nodeA = 0; nodeA < N; nodeA += 1) {\n      for (let nodeB = 0; nodeB < M; nodeB += 1) {\n        const val = weights[nodeA * M + nodeB];\n        if (val * val > threshold * threshold) {\n          ctx.beginPath();\n          ctx.globalAlpha = Math.abs(val) * (0.3 / threshold);\n          ctx.strokeStyle = val > 0 ? 'blue' : 'red';\n          ctx.moveTo(x0, y0 + nodeA * height / (N - 1));\n\n          // ctx.lineTo(x0 + width, y0 + nodeB * height / (M - 1));\n          ctx.bezierCurveTo(\n            x0 + width / 2, y0 + nodeA * height / (N - 1),\n            x0 + width / 2, y0 + nodeB * height / (M - 1),\n            x0 + width, y0 + nodeB * height / (M - 1)\n          );\n          ctx.stroke();\n        }\n      }\n    }\n    ctx.globalAlpha = 1;\n    return threshold;\n  }\n\n  drawnodes(ctx, N, values, x0, y0, height, radius) {\n    values = values || new Array(N).fill(0);\n    for (let nodeA = 0; nodeA < N; nodeA += 1) {\n      let cval = Math.max(128, 255 - (values[nodeA] * 128 | 0));\n      if (radius <= 2) {\n        cval = (cval + 128) / 2 | 0;\n      }\n      ctx.fillStyle = `rgb(${cval}, ${cval}, ${cval})`;\n      ctx.beginPath();\n      ctx.arc(x0, y0 + nodeA * height / (N - 1), radius, 0, 2 * Math.PI, false);\n      ctx.fill();\n    }\n  }\n\n  clearNetwork() {\n    const { canvas, ctx } = this;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n\n  renderNetwork() {\n    this.clearNetwork();\n\n    if (this.nn && this.nn.modelid === 'dense') {\n      const { canvas, ctx } = this;\n      const weights = this.nn.model.getWeights().map(w => w.dataSync());\n      this.lt1 = this.drawdenselayer(\n        784, 100, weights[0], XOFFSET, 50, DENSEWIDTH, (HEIGHT - 100), this.lt1\n      );\n      this.lt2 = this.drawdenselayer(\n        100, 10, weights[2], XOFFSET + DENSEWIDTH, 50, DENSEWIDTH, (HEIGHT - 100), this.lt2\n      );\n    }\n  }\n\n  clearActivations() {\n    this.actx.clearRect(0, 0, this.acanvas.width, this.acanvas.height);\n    this.ictx.clearRect(0, 0, this.icanvas.width, this.icanvas.height);\n  }\n\n  renderActivations() {\n    this.clearActivations();\n\n    if (this.nn){\n      if (this.traindigit.active) {\n        this.ictx.imageSmoothingEnabled = false; // no antialiasin\n        this.ictx.filter = 'brightness(0.5) invert(1) brightness(0.95)';\n        this.ictx.drawImage(this.traindigit, 0, 0, 28, 28, 60, 60, 28 * 6, 28 * 6);\n        this.ictx.filter = 'none';\n      }\n\n      this.barchart.update(this.currentProbabilities, this.currentTarget);\n\n      this.drawnodes(this.actx, 784, this.currentDigit, XOFFSET, 50, (HEIGHT - 100), 0.5);\n      if (this.nn.modelid === 'dense') {\n        this.drawnodes(this.actx, 100, this.intermediateActivations,\n          XOFFSET + DENSEWIDTH, 50, (HEIGHT - 100), 1.5);\n      }\n    }\n  }\n\n  async setCurrentTraining(trainXs, trainYs) {\n    const trainX1 = trainXs.slice([0, 0, 0, 0], [1, 28, 28, 1]); // only the first\n    const imageTensor = trainX1.reshape([28, 28, 1]); // first as image\n    await tf.browser.toPixels(imageTensor, this.traindigit);\n    this.traindigit.active = true;\n    this.currentDigit = imageTensor.dataSync();\n    this.computeActivations(trainX1);\n    const trainY1 = trainYs.slice([0, 0], [1, 10]); // only the first\n    // const target = trainY1.reshape([10]);\n    [this.currentTarget] = trainY1.argMax([-1]).dataSync();\n    this.renderNetwork();\n    this.renderActivations();\n    // clean up tensors\n    trainX1.dispose();\n    trainY1.dispose();\n    imageTensor.dispose();\n    // target.dispose();\n  }\n\n  async show(imageTensor, pixels) {\n    this.computeActivations(imageTensor);\n    this.currentDigit = pixels;\n    this.traindigit.active = false;\n    this.renderActivations();\n  }\n\n  computeActivations(input) {\n    if (!this.nn) {\n      return;\n    }\n    if (this.nn.modelid === 'dense') {\n      const A1 = this.nn.model.layers[0].apply(input);\n      const A2 = this.nn.model.layers[1].apply(A1);\n      const A3 = this.nn.model.layers[2].apply(A2);\n      this.intermediateActivations = A2.dataSync().map(x => Math.abs(x) / 2);\n      this.currentProbabilities = A3.dataSync();\n      [this.currentTarget] = A3.argMax([-1]).dataSync();\n      A1.dispose();\n      A2.dispose();\n      A3.dispose();\n    } else {\n      const prediction = this.nn.model.predict(input);\n      this.currentProbabilities = prediction.dataSync();\n      [this.currentTarget] = prediction.argMax([-1]).dataSync();\n      prediction.dispose();\n    }\n  }\n}\n","/* eslint-disable no-await-in-loop */\n/* globals tf */\nconst NUM_EXAMPLES = 50; // TODO\n\nexport default class ValidationPreview {\n  constructor(data, els) {\n    this.data = data;\n    this.els = els;\n\n    this.reset();\n  }\n\n  reset() {\n    this.accuracy = 0;\n    this.acccbs = [];\n    this.cleanup();\n  }\n\n  async initValidationImages() {\n    if (this.els.validationImages) {\n      this.digittext = [];\n      this.digitcontainer = [];\n      // Get the examples\n      this.examples = this.data.nextTestBatch(NUM_EXAMPLES);\n      const { examples } = this;\n      this.examplelabels = await examples.labels.argMax([-1]).dataSync();\n\n      const container = document.createElement('div');\n      for (let i = 0; i < NUM_EXAMPLES; i += 1) {\n        // Reshape the image to 28x28 px\n        const imageTensor = tf.tidy(() => examples.xs\n          .slice([i, 0], [1, examples.xs.shape[1]])\n          .reshape([28, 28, 1]));\n\n        const canvas = document.createElement('canvas');\n        this.digitcontainer[i] = document.createElement('div');\n\n        await tf.browser.toPixels(imageTensor, canvas);\n        this.digitcontainer[i].appendChild(canvas);\n        this.digittext[i] = document.createElement('div');\n        this.digitcontainer[i].appendChild(this.digittext[i]);\n        container.appendChild(this.digitcontainer[i]);\n        imageTensor.dispose();\n      }\n      //\n      this.els.validationImages.appendChild(container);\n      // document.body.appendChild(container);\n    }\n  }\n\n  async updateValidationImages(model) {\n    if (this.els.validationImages) {\n      const values = tf.tidy(() => {\n        const testxs = this.examples.xs.reshape([NUM_EXAMPLES, 28, 28, 1]);\n        return model.predict(testxs).argMax([-1]).dataSync();\n      });\n      //  console.log(preds);\n\n      for (let i = 0; i < NUM_EXAMPLES; i += 1) {\n        // digittext[i].innerHTML = `${values[i]} (${examplelabels[i]})`;\n        this.digittext[i].innerHTML = `${values[i]}`;\n        this.digitcontainer[i].style.backgroundColor = (values[i] === this.examplelabels[i]) ? 'green' : 'red';\n      }\n    }\n  }\n\n  async updateAccuracy(model, TEST_DATA_SIZE = 100) {\n    this.accuracy = tf.tidy(() => {\n      const d = this.data.nextTestBatch(TEST_DATA_SIZE);\n      const testXs = d.xs.reshape([TEST_DATA_SIZE, 28, 28, 1]);\n      const testYs = d.labels;\n      return model.evaluate(testXs, testYs)[1].dataSync();\n    });\n\n    if (TEST_DATA_SIZE < 1000 && this.accuracy > 0.9) {\n      // compute more exact accuracy if it is close to 100%\n      await this.updateAccuracy(model, 1000);\n    }\n    // this.els.validationAccuracy.innerHTML =\n    // `Accuracy on validation data (approx.): ${(acc * 1000 | 0)/10} %`;\n    this.els.validationAccuracy.innerHTML = `${(this.accuracy < 0.9)\n      ? Math.round(this.accuracy * 100)\n      : Math.round(this.accuracy * 1000) / 10}%`;\n\n    // run all callbacks for a lower accuracy\n    this.acccbs.filter(p => p.acc <= this.accuracy).map(p => (p.cb)());\n    // delete all callbacks that have been run\n    this.acccbs = this.acccbs.filter(p => p.acc > this.accuracy);\n  }\n\n  /* This function is not used anymore: smooth rendering of accuracy */\n\n  cleanup() {\n    while (this.els.validationImages && this.els.validationImages.firstChild) {\n      this.els.validationImages.removeChild(this.els.validationImages.firstChild);\n    }\n  }\n\n  addAccuracyCallback(acc, cb) {\n    this.acccbs.push({\n      cb,\n      acc,\n    });\n  }\n}\n","/* eslint-disable no-param-reassign */\n/* globals IMAGINARY */\n\nexport default class I18nControler {\n  static init(defaultLanguage = 'en') {\n    return IMAGINARY.i18n.init({\n      queryStringVariable: 'lang',\n      translationsDirectory: 'tr',\n      defaultLanguage,\n    }).then(() => {\n      I18nControler.update();\n    });\n  }\n\n  static setLanguage(code) {\n    IMAGINARY.i18n.setLang(code).then(() => {\n      I18nControler.update();\n    });\n  }\n\n  static update() {\n    document.querySelectorAll('[data-i18n-str]')\n      .forEach((element) => {\n        element.innerHTML = IMAGINARY.i18n.t(element.getAttribute('data-i18n-str'));\n      });\n\n    document.querySelectorAll('[data-i18n-str-title]')\n      .forEach((element) => {\n        element.setAttribute(\n          'title',\n          IMAGINARY.i18n.t(element.getAttribute('data-i18n-str-title')));\n      });\n\n    document.querySelectorAll('[data-i18n-html]')\n      .forEach((element) => {\n        const path = `pages/${IMAGINARY.i18n.getLang()}/${element.getAttribute('data-i18n-html')}.html`;\n        fetch(path)\n          .then((response) => {\n            if (response.status >= 200 && response.status < 300) {\n              return response.text();\n            }\n            throw new Error(response.statusText);\n          })\n          .then((content) => {\n            element.innerHTML = content;\n          })\n          .catch((err) => {\n            console.error(`Error fetching i18n page ${path}`);\n            console.error(err);\n          });\n      });\n  }\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n// import 'core-js/stable';\n// import 'regenerator-runtime/runtime';\n// import 'fetch-ie8';\nimport './main';\n","/* eslint-disable no-unused-vars */\nimport Controller from './Controller.js';\nimport IdleDetector from './IdleDetector.js';\nimport SlideShow from './SlideShow.js';\nimport I18nControler from './i18nController.js';\nimport LangSwitcher from './LangSwitcher.js';\n\nimport './slide-controllers/intro.js';\nimport './slide-controllers/training.js';\nimport './slide-controllers/what-is-training-data.js';\nimport './slide-controllers/design-network.js';\n\n/**\n * Return the URL of the user-supplied config file or {null} if it is not present.\n *\n * A custom config file name can be provided via the 'config' query string variable.\n * Allowed file names must match the regex /^[A-Za-z0\\-_.]+$/.\n *\n * @returns {URL|null} User-supplied config URL or {null} if not supplied.\n * @throws {Error} If the user-supplied config file name doesn't match the regex.\n */\nfunction getCustomConfigUrl() {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  if (!urlSearchParams.has('config')) {\n    return null;\n  }\n\n  const customConfigName = urlSearchParams.get('config');\n  const whitelistRegex = /^[A-Za-z0\\-_.]+$/;\n  if (whitelistRegex.test(customConfigName)) {\n    return new URL(customConfigName, window.location.href);\n  }\n\n  throw new Error(`Custom config path ${customConfigName} must match ${whitelistRegex.toString()}.`);\n}\n\nconst configDefaults = {\n  paintClearTimeout: 2.2,\n  idleReload: 300,\n  lastTrainStepTimeout: 1.5,\n  languages: {\n    en: 'English',\n  },\n  defaultLanguage: 'en',\n  modelPath: 'assets/models/my-model.json',\n  showLanguageSwitcher: true,\n};\n\n\nconst defaultConfigUrl = new URL('./config.json', window.location.href);\nconst customConfigUrl = getCustomConfigUrl();\nconst configUrl = customConfigUrl || defaultConfigUrl;\n\nfetch(configUrl, { cache: 'no-store' })\n  .then((response) => {\n    if (response.status >= 200 && response.status < 300) {\n      return response.json();\n    }\n    throw new Error(response.statusText);\n  })\n  .catch((err) => { throw new Error(`Failed to load config file ${configUrl}: ${err}`); })\n  .then((config => Object.assign({}, configDefaults, config)))\n  .then((config) => {\n    I18nControler.init(config.defaultLanguage).then(() => {\n      const controller = new Controller(config);\n      const slideShow = new SlideShow(controller);\n      controller.loadData();\n\n      if (Object.entries(config.languages).length > 1 && config.showLanguageSwitcher !== false) {\n        const langSwitcher = new LangSwitcher(\n          document.querySelector('.footer .utility'),\n          config,\n          (code) => { I18nControler.setLanguage(code); }\n        );\n      }\n\n      const id = new IdleDetector();\n      id.setTimeout(() => {\n        window.location.hash = '#intro';\n        window.location.reload();\n        controller.loadData();\n      },\n      1000 * config.idleReload);\n\n      // Disable dragging a elements\n      document.querySelectorAll('a')\n        .forEach((aElement) => {\n          aElement.addEventListener('dragstart', (ev) => {\n            ev.preventDefault();\n            ev.stopPropagation();\n          });\n        });\n    });\n  })\n  .catch(err => console.error(err));\n","/* eslint-disable no-param-reassign,no-restricted-properties */\nimport Slide from '../slide.js';\n\nexport default class DesignNetworkSlide extends Slide {\n  async onEnter() {\n    this.controller.testpaint = true;\n    let istraining = true;\n    let isBusy = false;\n    const d = document.querySelector('[data-slide=design-network] .train');\n    const resetadvancedoptions = () => {\n      d.querySelectorAll('.parameter .select').forEach((select) => {\n        select.querySelectorAll('.option').forEach((option, k) => {\n          option.classList.toggle('selected', k === 0);\n          if (k === 0) {\n            select.value = option.dataset.value;\n          }\n        });\n      });\n      d.querySelector('.learningrate').value = -3;\n      d.querySelector('.learningratetxt').innerHTML = '0.001';\n    };\n\n    resetadvancedoptions();\n\n    const els = {\n      trainingProgress: d.querySelector('.imagesused .number'),\n      // validationImages: d.querySelector('#validation-images'),\n      validationAccuracy: d.querySelector('.accuracy .number'),\n      input: d.querySelector('.traininputcanvas'),\n      network: d.querySelector('.simplenetwork > .network'),\n      activations: d.querySelector('.simplenetwork > .activations'),\n      bars: d.querySelector('.bars'),\n      paint: d.querySelector('.paint'),\n    };\n\n    const updateUI = () => {\n      istraining = (this.controller.nn && this.controller.nn.training);\n      if (this.controller.nn && this.controller.nn.trainedimages > 0) {\n        d.querySelector('.reset').classList.add('visible');\n      } else {\n        d.querySelector('.reset').classList.remove('visible');\n      }\n      d.querySelector('.paint').classList.toggle('visible', this.controller.testpaint);\n      d.querySelector('.training').classList.toggle('visible', !this.controller.testpaint);\n      if (this.controller.testpaint) {\n        if (this.controller.paint) {\n          this.controller.paint.clear();\n        }\n      }\n\n      const pr = d.querySelector('.pause-resume');\n\n      if (istraining) {\n        pr.classList.remove('resume');\n        pr.classList.add('pause');\n      } else {\n        pr.classList.add('resume');\n        pr.classList.remove('pause');\n      }\n\n      d.querySelectorAll('.parameter .select').forEach((select) => {\n        select.querySelectorAll('.option').forEach((option) => {\n          option.onpointerdown = () => {\n            if (select.value !== option.dataset.value) {\n              select.querySelectorAll('.option').forEach((ooption) => {\n                ooption.classList.toggle('selected', ooption === option);\n              });\n              select.value = option.dataset.value;\n              resetadvancednetwork();\n            }\n          };\n        });\n      });\n    };\n    updateUI();\n    /* buttons */\n    /*\n      if (d.querySelector(\".testit\")) d.querySelector(\".testit\").onpointerdown = async () => {\n        controller.testpaint = true;\n        updateUI();\n        await controller.pauseTraining();\n        updateUI();\n      };\n    */\n\n    d.querySelector('.pause-resume').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      istraining = !istraining;\n      await this.controller.toggleTraining(updateUI);\n      updateUI();\n      d.querySelector('.reset').classList.add('visible');\n      isBusy = false;\n    };\n\n    d.querySelector('.single-step').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      if (istraining) {\n        await this.controller.pauseTraining(updateUI);\n        // await controller.singleStep(updateUI);\n        istraining = false;\n      } else {\n        await this.controller.singleStep(updateUI);\n      }\n      updateUI();\n      isBusy = false;\n    };\n\n    d.querySelector('.reset').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      await this.controller.pauseTraining(updateUI);\n      await this.controller.resetTraining(els);\n      resetadvancednetwork();\n      updateUI();\n      isBusy = false;\n    };\n\n    /* expert mode */\n\n    const resetadvancednetwork = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      await this.controller.pauseTraining(updateUI);\n      const learningRate = Math.pow(10, d.querySelector('.learningrate').value);\n      d.querySelector('.learningratetxt').innerHTML = learningRate.toPrecision(1);\n      this.controller.resetNetwork(\n        d.querySelector('.modelid').value,\n        d.querySelector('.optimizerid').value,\n        learningRate,\n        d.querySelector('.activation').value\n      );\n      updateUI();\n      isBusy = false;\n    };\n\n    const rateSlider = d.querySelector('.learningrate');\n    const rateLabel = d.querySelector('.learningratetxt');\n    rateSlider.oninput = () => {\n      const rate = Math.pow(10, rateSlider.value);\n      rateLabel.innerText = rate.toPrecision(1);\n    };\n\n    d.querySelector('.learningrate').onchange = async () => {\n      resetadvancednetwork();\n    };\n\n    await this.controller.initTrainingEnvironment(els);\n    // controller.startTraining();\n    updateUI();\n  }\n\n  async onExit() {\n    this.controller.cleanupPaint();\n    await this.controller.pauseTraining();\n    this.controller.cleanupValidationPreview();\n    this.controller.cleanupNetwork();\n  }\n}\n\nSlide.registerClass('design-network', DesignNetworkSlide);\n","import Slide from '../slide.js';\n\nexport default class IntroSlide extends Slide {\n  async onEnter() {\n    await this.controller.initIntroPaint(this.element);\n  }\n\n  async onExit() {\n    this.controller.cleanupPaint();\n  }\n}\n\nSlide.registerClass('intro', IntroSlide);\n","/* eslint-disable no-param-reassign,no-restricted-properties */\nimport Slide from '../slide.js';\n\nexport default class TrainingSlide extends Slide {\n  async onEnter() {\n    this.controller.testpaint = true;\n    let istraining = true;\n    let isBusy = false;\n    const d = document.querySelector('[data-slide=training] .train');\n\n    const resetadvancedoptions = () => {\n      d.querySelectorAll('.parameter .select').forEach((select) => {\n        select.querySelectorAll('.option').forEach((option, k) => {\n          option.classList.toggle('selected', k === 0);\n          if (k === 0) {\n            select.value = option.dataset.value;\n          }\n        });\n      });\n      d.querySelector('.learningrate').value = -3;\n      d.querySelector('.learningratetxt').innerHTML = '0.001';\n    };\n\n    resetadvancedoptions();\n\n    const els = {\n      trainingProgress: d.querySelector('.imagesused .number'),\n      // validationImages: d.querySelector('#validation-images'),\n      validationAccuracy: d.querySelector('.accuracy .number'),\n      input: d.querySelector('.traininputcanvas'),\n      network: d.querySelector('.simplenetwork > .network'),\n      activations: d.querySelector('.simplenetwork > .activations'),\n      bars: d.querySelector('.bars'),\n      paint: d.querySelector('.paint'),\n    };\n\n    const updateUI = () => {\n      istraining = (this.controller.nn && this.controller.nn.training);\n      if (this.controller.nn && this.controller.nn.trainedimages > 0) {\n        d.querySelector('.reset').classList.add('visible');\n      } else {\n        d.querySelector('.reset').classList.remove('visible');\n      }\n      d.querySelector('.paint').classList.toggle('visible', this.controller.testpaint);\n      d.querySelector('.training').classList.toggle('visible', !this.controller.testpaint);\n      if (this.controller.testpaint) {\n        if (this.controller.paint) {\n          this.controller.paint.clear();\n        }\n      }\n\n      // d.querySelector(\".expertmode-on-off\").innerHTML = expertmode ? \"on\" : \"off\";\n\n      const pr = d.querySelector('.pause-resume');\n\n      if (istraining) {\n        pr.classList.remove('resume');\n        pr.classList.add('pause');\n      } else {\n        pr.classList.add('resume');\n        pr.classList.remove('pause');\n      }\n\n      d.querySelectorAll('.parameter .select').forEach((select) => {\n        select.querySelectorAll('.option').forEach((option) => {\n          option.onpointerdown = () => {\n            if (select.value !== option.dataset.value) {\n              select.querySelectorAll('.option').forEach((ooption) => {\n                ooption.classList.toggle('selected', ooption === option);\n              });\n              select.value = option.dataset.value;\n              resetadvancednetwork();\n            }\n          };\n        });\n      });\n    };\n    updateUI();\n    /* buttons */\n    /*\n      if (d.querySelector(\".testit\")) d.querySelector(\".testit\").onpointerdown = async () => {\n        controller.testpaint = true;\n        updateUI();\n        await controller.pauseTraining();\n        updateUI();\n      };\n    */\n\n    d.querySelector('.pause-resume').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      istraining = !istraining;\n      await this.controller.toggleTraining(updateUI);\n      updateUI();\n      d.querySelector('.reset').classList.add('visible');\n      isBusy = false;\n    };\n\n    d.querySelector('.single-step').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      if (istraining) {\n        await this.controller.pauseTraining(updateUI);\n        // await controller.singleStep(updateUI);\n        istraining = false;\n      } else {\n        await this.controller.singleStep(updateUI);\n      }\n      updateUI();\n      isBusy = false;\n    };\n\n    d.querySelector('.reset').onpointerdown = async () => {\n      if (isBusy) {\n        return;\n      }\n      isBusy = true;\n      await this.controller.pauseTraining(updateUI);\n      await this.controller.resetTraining(els);\n      await resetadvancednetwork();\n      updateUI();\n      isBusy = false;\n    };\n\n    /* expert mode */\n\n    const resetadvancednetwork = async () => {\n      await this.controller.pauseTraining(updateUI);\n      const learningRate = Math.pow(10, d.querySelector('.learningrate').value);\n      d.querySelector('.learningratetxt').innerHTML = learningRate.toPrecision(1);\n      this.controller.resetNetwork(\n        d.querySelector('.modelid').value,\n        d.querySelector('.optimizerid').value,\n        learningRate,\n        d.querySelector('.activation').value\n      );\n      updateUI();\n    };\n\n    const rateSlider = d.querySelector('.learningrate');\n    const rateLabel = d.querySelector('.learningratetxt');\n    rateSlider.oninput = () => {\n      const rate = Math.pow(10, rateSlider.value);\n      rateLabel.innerText = rate.toPrecision(1);\n    };\n\n    d.querySelector('.learningrate').onchange = async () => {\n      await resetadvancednetwork();\n    };\n\n    await this.controller.initTrainingEnvironment(els);\n    // controller.startTraining();\n    updateUI();\n  }\n\n  async onExit() {\n    this.controller.cleanupPaint();\n    await this.controller.pauseTraining();\n    this.controller.cleanupValidationPreview();\n    this.controller.cleanupNetwork();\n  }\n}\n\nSlide.registerClass('training', TrainingSlide);\n","import Slide from '../slide.js';\n\nexport default class WhatIsTrainingDataSlide extends Slide {\n  async onEnter() {\n    await this.controller.initIntroPaint(document.querySelector('#normalizepaint'));\n  }\n\n  async onExit() {\n    this.controller.cleanupPaint();\n  }\n}\n\nSlide.registerClass('what-is-training-data', WhatIsTrainingDataSlide);\n","/* eslint-disable class-methods-use-this */\nexport default class Slide {\n  constructor(element, controller) {\n    this.element = element;\n    this.controller = controller;\n  }\n\n  async onEnter() {\n    return Promise.resolve();\n  }\n\n  async onExit() {\n    return Promise.resolve();\n  }\n}\n\nSlide.slideClasses = {};\n\nSlide.registerClass = (id, slideClass) => {\n  Slide.slideClasses[id] = slideClass;\n}\n\nSlide.getClass = id => Slide.slideClasses[id];\n"]}