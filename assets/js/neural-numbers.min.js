!function a(s,o,u){function l(e,t){if(!o[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=o[e]={exports:{}};s[e][0].call(i.exports,function(t){return l(s[e][1][t]||t)},i,i.exports,a,s,o,u)}return o[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.el=t,this.cleanup(),this.bars=[];for(var e=0;e<10;e+=1){var n=document.createElement("div");n.className="barcontainer",this.bars[e]=document.createElement("div"),this.bars[e].classList.add("bar");var r=document.createElement("div");r.className="bartxt",r.innerHTML="".concat(e),n.appendChild(this.bars[e]),n.appendChild(r),this.el.appendChild(n)}}var t,e,n;return t=i,(e=[{key:"cleanup",value:function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)}},{key:"update",value:function(t,e){for(var n=1<arguments.length&&void 0!==e?e:-1,r=0;r<10;r+=1)this.bars[r].dataset.probability=t[r],this.bars[r].style="--probability: ".concat(t[r]),this.bars[r].classList.toggle("highlighted",r===n)}}])&&r(t.prototype,e),n&&r(t,n),i}();n.default=i},{}],2:[function(t,e,n){"use strict";function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.MnistData=void 0;var h=784,d=52e3,s="assets/mnist/mnist_images.png",l="assets/mnist/mnist_labels_uint8",i=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.shuffledTrainIndex=0,this.shuffledTestIndex=0,this.imagePath=t,this.labelPath=e}var t,e,r,o,i;return t=n,(e=[{key:"load",value:(o=regeneratorRuntime.mark(function t(){var s,o,u,e,n,r,i,a,l=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=new Image,o=document.createElement("canvas"),u=o.getContext("2d",{willReadFrequently:!0}),e=new Promise(function(a,t){s.crossOrigin="",s.onload=function(){s.width=s.naturalWidth,s.height=s.naturalHeight;var t=new ArrayBuffer(20384e4);o.width=s.width,o.height=5e3;for(var e=0;e<13;e++){var n=new Float32Array(t,e*h*5e3*4,392e4);u.drawImage(s,0,5e3*e,s.width,5e3,0,0,s.width,5e3);for(var r=u.getImageData(0,0,o.width,o.height),i=0;i<r.data.length/4;i++)n[i]=r.data[4*i]/255}l.datasetImages=new Float32Array(t),a()},s.src=l.imagePath}),n=fetch(this.labelPath),t.next=7,Promise.all([e,n]);case 7:return r=t.sent,i=c(r,2),i[0],a=i[1],t.t0=Uint8Array,t.next=14,a.arrayBuffer();case 14:t.t1=t.sent,this.datasetLabels=new t.t0(t.t1),this.trainIndices=tf.util.createShuffledIndices(d),this.testIndices=tf.util.createShuffledIndices(13e3),this.trainImages=this.datasetImages.slice(0,h*d),this.testImages=this.datasetImages.slice(h*d),this.trainLabels=this.datasetLabels.slice(0,52e4),this.testLabels=this.datasetLabels.slice(52e4);case 22:case"end":return t.stop()}},t,this)}),i=function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){u(r,e,n,i,a,"next",t)}function a(t){u(r,e,n,i,a,"throw",t)}i(void 0)})},function(){return i.apply(this,arguments)})},{key:"nextTrainBatch",value:function(t){var e=this;return this.nextBatch(t,[this.trainImages,this.trainLabels],function(){return e.shuffledTrainIndex=(e.shuffledTrainIndex+1)%e.trainIndices.length,e.trainIndices[e.shuffledTrainIndex]})}},{key:"nextTestBatch",value:function(t){var e=this;return this.nextBatch(t,[this.testImages,this.testLabels],function(){return e.shuffledTestIndex=(e.shuffledTestIndex+1)%e.testIndices.length,e.testIndices[e.shuffledTestIndex]})}},{key:"nextBatch",value:function(t,e,n){for(var r=new Float32Array(t*h),i=new Uint8Array(10*t),a=0;a<t;a++){var s=n(),o=e[0].slice(s*h,s*h+h);r.set(o,a*h);var u=e[1].slice(10*s,10*s+10);i.set(u,10*a)}return{xs:tf.tensor2d(r,[t,h]),labels:tf.tensor2d(i,[t,10])}}}])&&a(t.prototype,e),r&&a(t,r),n}();n.MnistData=i},{}],3:[function(t,e,n){"use strict";function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function h(o){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){u(r,e,n,i,a,"next",t)}function a(t){u(r,e,n,i,a,"throw",t)}i(void 0)})}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},{trainingCallback:null,batchCallback:null,modelUpdateCallback:null,modelUpdateAsyncCallback:null},t),this.training=!1,this.init()}var t,n,r,i,a,s,o;return t=e,(n=[{key:"init",value:function(t,e,n,r){var i=0<arguments.length&&void 0!==t?t:"dense",a=1<arguments.length&&void 0!==e?e:"adam",s=2<arguments.length&&void 0!==n?n:.001,o=3<arguments.length&&void 0!==r?r:"relu";console.log("Setting up NN model=".concat(i," optimizer=").concat(a," learningrate=").concat(s," activation=").concat(o)),this.modelid=i,this.trainedimages=0,this.lastrainedimages=0,this.pausecbs=[],this.options.batchCallback&&this.options.batchCallback(this.trainedimages),this.model&&this.model.dispose(),this.model=tf.sequential();var u=this.model;"cnn"===i?(u.add(tf.layers.conv2d({inputShape:[28,28,1],kernelSize:5,filters:8,strides:1,activation:o,kernelInitializer:"varianceScaling"})),u.add(tf.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),u.add(tf.layers.conv2d({kernelSize:5,filters:16,strides:1,activation:o,kernelInitializer:"varianceScaling"})),u.add(tf.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),u.add(tf.layers.flatten())):"dense"===i?(u.add(tf.layers.flatten({inputShape:[28,28,1]})),u.add(tf.layers.dense({units:100,activation:o,kernelInitializer:"varianceScaling"}))):"nohidden"===i&&u.add(tf.layers.flatten({inputShape:[28,28,1]}));u.add(tf.layers.dense({units:10,kernelInitializer:"varianceScaling",activation:"softmax"}));var l="adam"===a?tf.train.adam(s):tf.train.sgd(s);return u.compile({optimizer:l,loss:"categoricalCrossentropy",metrics:["accuracy"]}),u}},{key:"trainByBatchFromData",value:(o=h(regeneratorRuntime.mark(function t(e,n,r){var i,a,s,o,u,l=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==n&&1!==r||tf.setBackend("cpu"),i=this.model,a=tf.tidy(function(){var t=e.nextTrainBatch(n);return[t.xs.reshape([n,28,28,1]),t.labels]}),s=c(a,2),o=s[0],u=s[1],this.options.trainingCallback)return t.next=6,this.options.trainingCallback(o,u);t.next=6;break;case 6:return t.next=8,i.fit(o,u,{batchSize:r,callbacks:{onEpochEnd:function(){var t=h(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),onBatchEnd:function(){var t=h(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.trainedimages+=r,l.options.batchCallback&&l.options.batchCallback(l.trainedimages);case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}});case 8:tf.dispose(o),tf.dispose(u),1!==n&&1!==r||tf.setBackend("webgl");case 11:case"end":return t.stop()}},t,this)})),function(t,e,n){return o.apply(this,arguments)})},{key:"trainSingleStep",value:(s=h(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.trainByBatchFromData(e,1,1);case 2:if(this.options.modelUpdateCallback&&this.options.modelUpdateCallback(this.model),this.options.modelUpdateAsyncCallback)return t.next=6,this.options.modelUpdateAsyncCallback(this.model);t.next=6;break;case 6:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"train",value:(a=h(regeneratorRuntime.mark(function t(e){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.training=!0;case 1:if(this.training)return 0,t.next=6,this.trainByBatchFromData(e,32,32);t.next=17;break;case 6:if(!(this.trainedimages>this.lastrainedimages+Math.min(1e3,.3*this.trainedimages)||this.trainedimages<250)){t.next=15;break}if(this.options.modelUpdateCallback&&this.options.modelUpdateCallback(this.model),this.options.modelUpdateAsyncCallback)return t.next=11,this.options.modelUpdateAsyncCallback(this.model);t.next=11;break;case 11:if(this.trainedimages<100)return t.next=14,new Promise(function(t){return setTimeout(t,1e3/(5+4*n.trainedimages)*(n.trainedimages-n.lastrainedimages))});t.next=14;break;case 14:this.lastrainedimages=this.trainedimages;case 15:t.next=1;break;case 17:for(;0<this.pausecbs.length;)this.pausecbs.pop()();case 18:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"addPauseCallback",value:function(t){this.pausecbs.push(t)}},{key:"pauseTraining",value:function(){var e=this;return new Promise(function(t){e.training?(e.addPauseCallback(t),e.training=!1):t()})}},{key:"isTraining",value:function(){return this.training}},{key:"toggleTraining",value:(i=h(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.training)return t.next=3,this.pauseTraining();t.next=5;break;case 3:t.next=7;break;case 5:return t.next=7,this.train(e);case 7:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"cleanup",value:function(){this.model.dispose(),this.trainedimages=0,this.lastrainedimages=0}}])&&l(t.prototype,n),r&&l(t,r),e}();n.default=i},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=t("./BarChart.js"))&&r.__esModule?r:{default:r};function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=9,l=2*u,c=function(){function a(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:2.2;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.clearTimeoutTime=i,this.drawingChanged=!0,this.model=e,this.nwvis=r,this.barchart=null,this.drawingActive=!0,this.clearOnInput=!1,this.outputThreshold=n,this.pos={x:0,y:0},this.createUI(t),this.empty=!0,this.isdown=!1,this.pointerId=-1}var t,e,n;return t=a,(e=[{key:"addEventListeners",value:function(){var e=this;for(var t in this.eventfunctions={pointerdown:function(t){!e.isdown&&e.drawingActive&&(e.clearOnInput&&e.clear(),e.removeClearTimeout(),e.setPosition(t),e.isdown=!0,e.pointerId=t.pointerId)},pointermove:function(t){e.isdown&&e.drawingActive&&e.pointerId===t.pointerId&&e.draw(t)},pointerup:function(t){e.drawingActive&&e.pointerId===t.pointerId&&(e.setClearTimeout(),e.isdown=!1)},pointerleave:function(t){e.drawingActive&&e.pointerId===t.pointerId&&(e.setClearTimeout(),e.isdown=!1)},pointercancel:function(t){e.drawingActive&&e.pointerId===t.pointerId&&(e.setClearTimeout(),e.isdown=!1)}},this.eventfunctions)this.drawcanvas.addEventListener(t,this.eventfunctions[t],{passive:!0})}},{key:"removeEventListeners",value:function(){for(var t in this.eventfunctions)this.drawcanvas.removeEventListener(t,this.eventfunctions[t])}},{key:"createUI",value:function(t){var e=this;this.drawcanvas=t.querySelector(".drawcanvas"),this.normalizecanvas=t.querySelector(".normalizecanvas")||document.createElement("canvas"),this.outputbars=t.querySelector(".bars"),this.outputdigit=t.querySelector(".digit"),this.inputbox=t.querySelector(".input.box"),this.addEventListeners();var n=this.normalizecanvas,r=this.drawcanvas;n.width=28,n.height=28;function i(){u=Math.floor(e.drawcanvas.clientWidth/28)-1,l=2*u,r.width=e.drawcanvas.clientWidth,r.height=e.drawcanvas.clientWidth}i(),window.onresize=function(){i()},this.drawcontext=this.drawcanvas.getContext("2d",{willReadFrequently:!0}),this.normalizecontext=this.normalizecanvas.getContext("2d",{willReadFrequently:!0}),this.outputbars&&(this.barchart=new s.default(this.outputbars)),this.clear()}},{key:"setPosition",value:function(t){var e=this.drawcanvas.getBoundingClientRect();return this.pos.x=t.clientX-e.left,this.pos.y=t.clientY-e.top,!0}},{key:"removeClearTimeout",value:function(){return this.clearTimeout&&clearTimeout(this.clearTimeout),!0}},{key:"setClearTimeout",value:function(){var t=this;return this.removeClearTimeout(),this.clearTimeout=setTimeout(function(){t.clear()},1e3*this.clearTimeoutTime),!0}},{key:"setClearOnInput",value:function(){this.clearOnInput=!0}},{key:"draw",value:function(t){this.removeClearTimeout();var e=this.pos.x,n=this.pos.y;this.setPosition(t);var r=this.pos.x,i=this.pos.y;if(Math.abs(r-e)+Math.abs(i-n)<3)return this.pos.x=e,void(this.pos.y=n);this.hidePlaceholder(),this.empty=!1,this.drawcontext.beginPath(),this.drawcontext.lineWidth=l,this.drawcontext.lineCap="round",this.drawcontext.strokeStyle="white",this.drawcontext.moveTo(e,n),this.setPosition(t),this.drawcontext.lineTo(r,i),this.drawcontext.stroke(),this.normalizecontext.fillStyle="black",this.normalizecontext.fillRect(0,0,this.normalizecanvas.width,this.normalizecanvas.height),this.drawingChanged=!0,this.normalize(l),this.predict()}},{key:"normalize",value:function(t){for(var e,n=0,r=0,i=1e3,a=-1e3,s=1e3,o=-1e3,u=this.drawcontext.getImageData(0,0,this.drawcanvas.width,this.drawcanvas.height).data,l=0,c=0;c<u.length;c+=4*t){var h=c/4%this.drawcanvas.width,d=c/4/this.drawcanvas.width|0;l+=u[c],n+=u[c]*h,r+=u[c]*d,0<u[c]&&(i=Math.min(i,d),a=Math.max(a,d),s=Math.min(s,h),o=Math.max(o,h))}return 0<l?(n/=l,r/=l,e=Math.max(o-s,a-i),this.normalizecontext.drawImage(this.drawcanvas,s,i,e,e,14+20/e*(s-n),14+20/e*(i-r),20,20)):this.normalizecontext.fillRect(0,0,this.normalizecanvas.width,this.normalizecanvas.height),!0}},{key:"predict",value:function(){var t,e,n,r=this;return this.model&&this.normalizecanvas&&this.drawingChanged&&(e=(t=i(tf.tidy(function(){var t=tf.browser.fromPixels(r.normalizecanvas,1).toFloat().mul(tf.scalar(1/255)).clipByValue(0,1).reshape([1,28,28,1]);r.nwvis&&r.nwvis.show(t,r.normalizecontext.getImageData(0,0,r.normalizecanvas.width,r.normalizecanvas.height).data.filter(function(t,e){return e%4==0}));var e=r.model.predict(t);return[e.dataSync(),e.argMax([-1]).dataSync()]}),2))[0],n=t[1],this.barchart&&this.barchart.update(e,n),this.outputdigit&&(this.outputdigit.innerHTML=!this.empty&&e[n]>this.outputThreshold?n:"?",this.outputdigit.parentElement.classList.toggle("solved",e[n]>this.outputThreshold))),!0}},{key:"swapModel",value:function(t){this.model=t,this.predict()}},{key:"clear",value:function(){this.clearOnInput=!1,this.drawcontext.fillRect(0,0,this.drawcanvas.width,this.drawcanvas.height),this.empty=!0,this.normalize(100),this.predict(),this.showPlaceholder()}},{key:"cleanup",value:function(){this.clear(),this.removeEventListeners(),this.barchart&&this.barchart.cleanup()}},{key:"showPlaceholder",value:function(){this.inputbox.classList.add("background")}},{key:"hidePlaceholder",value:function(){this.inputbox.classList.remove("background")}},{key:"disableDrawing",value:function(){this.drawingActive=!1,this.isdown=!1}},{key:"enableDrawing",value:function(){this.drawingActive=!0}}])&&o(t.prototype,e),n&&o(t,n),a}();n.default=c},{"./BarChart.js":1}],5:[function(t,e,n){"use strict";var r=s(t("./neural-numbers-component")),i=s(t("./training-controller")),a=s(t("./training-component"));function s(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return void 0===t?e:"false"!==t}$("[data-component=neural-numbers]").each(function(t,e){var n={modelPath:$(e).attr("data-model")||null,inputPlaceholder:$(e).attr("data-input-placeholder")||"",showBars:o($(e).attr("data-show-bars"),!1),showNormalizer:o($(e).attr("data-show-normalizer"),!1),showOutput:o($(e).attr("data-show-output"),!0)};new r.default(e,n).init()}),void 0===window.IMAGINARY&&(window.IMAGINARY={}),void 0===window.IMAGINARY.NeuralNumbers&&(window.IMAGINARY.NeuralNumbers=r.default,window.IMAGINARY.NeuralNumbersTrainingController=i.default,window.IMAGINARY.NeuralNumbersTraining=a.default)},{"./neural-numbers-component":6,"./training-component":7,"./training-controller":8}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./Paint"))&&r.__esModule?r:{default:r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function s(o){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){u(r,e,n,i,a,"next",t)}function a(t){u(r,e,n,i,a,"throw",t)}i(void 0)})}}var o={};function l(){return(l=s(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||e in o){t.next=4;break}return t.next=3,tf.loadLayersModel(e);case 3:o[e]=t.sent;case 4:return t.abrupt("return",o[e]);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}var c=function(){function h(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),this.$element=$(t),this.props=e,this.defaultModel=null,this.model=null,this.paint=null;var n=this.props,r=n.inputPlaceholder,i=n.safeInputPlaceholder,a=n.classes,s=n.showBars,o=n.showNormalizer,u=n.showOutput,l=n.verticalBars;this.$element.addClass("neural-numbers-component"),this.$element.toggleClass("with-bars",s),this.$element.toggleClass("with-normalizer",o),this.$element.toggleClass("with-output",u),a&&this.$element.addClass(a),this.$inputStage=$("<div>").addClass(["stage","stage-input","input","box"]).appendTo(this.$element),this.$drawCanvas=$("<canvas>").addClass(["drawcanvas","input-canvas"]).appendTo($("<div>").addClass("input-canvas-wrapper").appendTo(this.$inputStage));var c=$("<span>");r?c.html(r):i&&c.text(i),$("<div>").addClass("input-placeholder").append(c).appendTo(this.$inputStage),this.$normalizeStage=$("<div>").addClass(["stage","stage-normalize"]).appendTo(this.$element),this.$normalizeCanvas=$("<canvas>").addClass("normalizecanvas").appendTo($("<div>").addClass("normalize-canvas-wrapper").appendTo(this.$normalizeStage)),this.$probabilityStage=$("<div>").addClass(["stage","stage-bars"]).appendTo(this.$element),this.$bars=$("<div>").addClass("bars").toggleClass("bars-vertical",l||!1).appendTo(this.$probabilityStage),this.$outputStage=$("<div>").addClass(["stage","stage-output"]).appendTo(this.$element),this.$output=$("<div>").addClass(["output","digit"]).appendTo($("<div>").addClass("output-wrapper").appendTo(this.$outputStage))}var t,e,n,r;return t=h,(e=[{key:"init",value:(r=s(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.modelPath,t.next=3,function(t){return l.apply(this,arguments)}(e);case 3:this.defaultModel=t.sent,this.model=this.defaultModel,this.paint=new i.default(this.$element[0],this.model,.5,!1,h.PAINT_CLEAR_TIMEOUT);case 6:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})},{key:"setModel",value:function(t){var e=0<arguments.length&&void 0!==t?t:null;null===e&&(e=this.defaultModel),this.model=e,this.paint.swapModel(e)}},{key:"getBarChart",value:function(){return this.paint.barchart}},{key:"disableDrawing",value:function(){this.paint.disableDrawing()}},{key:"enableDrawing",value:function(){this.paint.enableDrawing()}},{key:"setClearTimeout",value:function(){this.paint.setClearTimeout()}},{key:"setClearOnInput",value:function(){this.paint.setClearOnInput()}},{key:"hidePlaceholder",value:function(){this.paint.hidePlaceholder()}},{key:"showPlaceholder",value:function(){this.paint.showPlaceholder()}}])&&a(t.prototype,e),n&&a(t,n),h}();(n.default=c).PAINT_CLEAR_TIMEOUT=2.2},{"./Paint":4}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=t("./training-controller"))&&r.__esModule?r:{default:r};function u(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.trainingController=new a.default(t,n),this.nnComponent=t,this.$element=$(e),this.props=Object.assign({},{imageCountLabelText:"Images used:",predictedAccuracyLabelText:"Predicted accuracy:"},n),this.$element.addClass("neural-numbers-training-component"),this.$controlsL=$("<div>").addClass(["controls","controls-l"]).appendTo(this.$element),this.$progress=$("<div>").addClass("training-progress").appendTo(this.$element),this.$imageCount=$("<div>").addClass("image-count").appendTo(this.$progress),this.$imageCountLabel=$("<div>").addClass("image-count-label").html(this.props.imageCountLabelText).appendTo(this.$imageCount),this.$imageCountValue=$("<div>").addClass("image-count-value").appendTo(this.$imageCount),this.$accuracy=$("<div>").addClass("accuracy").appendTo(this.$progress),this.$accuracyLabel=$("<div>").addClass("accuracy-label").html(this.props.predictedAccuracyLabelText).appendTo(this.$accuracy),this.$accuracyValue=$("<div>").addClass("accuracy-value").appendTo(this.$accuracy),this.$controlsR=$("<div>").addClass(["controls","controls-r"]).appendTo(this.$element),this.$startPauseBtn=$("<button>").addClass(["start-pause-btn","btn"]).text("Start").on("click",this.handleStartPauseBtn.bind(this)).appendTo(this.$controlsL),this.$stepBtn=$("<button>").addClass(["step-btn","btn"]).text("Step").on("click",this.handleStepBtn.bind(this)).appendTo(this.$controlsL),this.$resetBtn=$("<button>").addClass(["reset-btn","btn"]).text("Reset").on("click",this.handleResetBtn.bind(this)).appendTo(this.$controlsR),this.trainingController.events.on("batch",this.handleBatch.bind(this)),this.trainingController.events.on("accuracy",this.handleAccuracy.bind(this)),this.trainingController.events.on("start",this.handleTrainingStart.bind(this)),this.trainingController.events.on("pause",this.handleTrainingPause.bind(this)),this.trainingController.events.on("training-complete",this.handleTrainingComplete.bind(this)),this.trainingController.events.on("reset",this.handleTrainingReset.bind(this)),this.disableButtons()}var t,e,n,o,i;return t=r,(e=[{key:"init",value:(o=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.trainingController.init();case 2:this.enableButtons();case 3:case"end":return t.stop()}},t,this)}),i=function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){u(r,e,n,i,a,"next",t)}function a(t){u(r,e,n,i,a,"throw",t)}i(void 0)})},function(){return i.apply(this,arguments)})},{key:"disableButtons",value:function(){this.$startPauseBtn.attr("disabled",!0),this.$stepBtn.attr("disabled",!0),this.$resetBtn.attr("disabled",!0)}},{key:"enableButtons",value:function(){this.$startPauseBtn.attr("disabled",!1),this.$stepBtn.attr("disabled",!1),this.$resetBtn.attr("disabled",!1)}},{key:"disableTrainingButtons",value:function(){this.$startPauseBtn.attr("disabled",!0),this.$stepBtn.attr("disabled",!0)}},{key:"enableTrainingButtons",value:function(){this.$startPauseBtn.attr("disabled",!1),this.$stepBtn.attr("disabled",!1)}},{key:"handleStartPauseBtn",value:function(){this.trainingController.isTraining()?this.trainingController.pause():this.trainingController.start()}},{key:"handleStepBtn",value:function(){this.trainingController.step()}},{key:"handleResetBtn",value:function(){this.trainingController.reset()}},{key:"handleBatch",value:function(t){this.$imageCountValue.text(t)}},{key:"handleAccuracy",value:function(t){this.$accuracyValue.attr("data-ranking",50<t?85<t?"good":"mediocre":"bad"),this.$accuracyValue.text("".concat(Math.round(t),"%"))}},{key:"handleTrainingStart",value:function(){this.$startPauseBtn.text("Pause"),this.$element.addClass("running"),this.nnComponent.disableDrawing()}},{key:"handleTrainingPause",value:function(){this.$startPauseBtn.text("Start"),this.$element.removeClass("running"),this.nnComponent.enableDrawing()}},{key:"handleTrainingComplete",value:function(){this.disableTrainingButtons()}},{key:"handleTrainingReset",value:function(){this.enableTrainingButtons()}}])&&s(t.prototype,e),n&&s(t,n),r}();n.default=i},{"./training-controller":8}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=r(t("events")),d=r(t("./NeuralNetwork")),f=r(t("./training-viz")),p=t("./MnistData");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function v(o){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){u(r,e,n,i,a,"next",t)}function a(t){u(r,e,n,i,a,"throw",t)}i(void 0)})}}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.events=new h.default,this.nnComponent=t,this.props=Object.assign({},{maxTrainingImages:6e4,trainingImagePath:void 0,trainingLabelPath:void 0},e),this.nn=new d.default({trainingCallback:this.handleTraining.bind(this),batchCallback:this.handleBatch.bind(this),modelUpdateAsyncCallback:this.handleModelUpdate.bind(this)}),this.data=new p.MnistData(this.props.trainingImagePath,this.props.trainingLabelPath),this.trainingViz=new f.default(this)}var t,e,r,i,a,s,o,u,l,c;return t=n,(e=[{key:"init",value:(c=v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.data.load();case 2:this.rebuildNetwork();case 3:case"end":return t.stop()}},t,this)})),function(){return c.apply(this,arguments)})},{key:"rebuildNetwork",value:function(){this.nn.init(),this.nnComponent.setModel(this.nn.model),this.handleModelUpdate(this.nn.model),this.events.emit("reset")}},{key:"useDefaultModel",value:function(){this.nnComponent.setModel(),this.handleModelUpdate(this.nn.model)}},{key:"useTrainableModel",value:function(){this.rebuildNetwork()}},{key:"isTraining",value:function(){return this.nn.isTraining()}},{key:"start",value:(l=v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nn.trainedimages>=this.props.maxTrainingImages)return t.abrupt("return");t.next=2;break;case 2:return this.events.emit("start"),t.next=5,this.nn.train(this.data);case 5:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)})},{key:"pause",value:(u=v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.nn.pauseTraining();case 2:this.events.emit("pause");case 3:case"end":return t.stop()}},t,this)})),function(){return u.apply(this,arguments)})},{key:"step",value:(o=v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nn.trainedimages>=this.props.maxTrainingImages)return t.abrupt("return");t.next=2;break;case 2:return t.next=4,this.nn.trainSingleStep(this.data);case 4:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)})},{key:"reset",value:(s=v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.nn.pauseTraining();case 2:this.rebuildNetwork();case 3:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})},{key:"handleBatch",value:function(t){this.events.emit("batch",t),t>=this.props.maxTrainingImages&&(this.events.emit("training-complete"),this.pause())}},{key:"handleTraining",value:(a=v(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.trainingViz.setCurrentTraining(e,n);case 2:case"end":return t.stop()}},t,this)})),function(t,e){return a.apply(this,arguments)})},{key:"handleModelUpdate",value:(i=v(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.trainingViz.estimateAccuracy(e);case 2:n=t.sent,this.events.emit("accuracy",n);case 4:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})}])&&m(t.prototype,e),r&&m(t,r),n}();n.default=i},{"./MnistData":2,"./NeuralNetwork":3,"./training-viz":9,events:10}],9:[function(t,e,n){"use strict";function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void n(t)}o.done?e(u):Promise.resolve(u).then(r,i)}function o(o){return function(){var t=this,s=arguments;return new Promise(function(e,n){var r=o.apply(t,s);function i(t){l(r,e,n,i,a,"next",t)}function a(t){l(r,e,n,i,a,"throw",t)}i(void 0)})}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.trainingController=t,this.nnComponent=t.nnComponent,this.drawCanvas=this.nnComponent.$drawCanvas[0],this.drawCanvasCtx=this.drawCanvas.getContext("2d"),this.trainDigitBuffer=document.createElement("canvas"),this.trainDigitBuffer.height=28,this.trainDigitBuffer.width=28}var t,n,r,i,a,s;return t=e,(n=[{key:"init",value:(s=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),function(){return s.apply(this,arguments)})},{key:"setCurrentTraining",value:(a=o(regeneratorRuntime.mark(function t(e,n){var r,i,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.slice([0,0,0,0],[1,28,28,1]),i=r.reshape([28,28,1]),t.next=4,tf.browser.toPixels(i,this.trainDigitBuffer);case 4:this.trainDigitBuffer.active=!0,this.currentDigit=i.dataSync(),this.computeActivations(r),a=n.slice([0,0],[1,10]),s=a.argMax([-1]).dataSync(),o=u(s,1),this.currentTarget=o[0],this.renderNetwork(),this.renderActivations(),r.dispose(),a.dispose(),i.dispose();case 16:case"end":return t.stop()}},t,this)})),function(t,e){return a.apply(this,arguments)})},{key:"computeActivations",value:function(t){var e,n,r,i,a,s,o=this.trainingController.nn;"dense"===o.modelid?(e=o.model.layers[0].apply(t),n=o.model.layers[1].apply(e),r=o.model.layers[2].apply(n),this.intermediateActivations=n.dataSync().map(function(t){return Math.abs(t)/2}),this.currentProbabilities=r.dataSync(),i=u(r.argMax([-1]).dataSync(),1),this.currentTarget=i[0],e.dispose(),n.dispose(),r.dispose()):(a=o.model.predict(t),this.currentProbabilities=a.dataSync(),s=u(a.argMax([-1]).dataSync(),1),this.currentTarget=s[0],a.dispose())}},{key:"renderNetwork",value:function(){}},{key:"clearActivations",value:function(){this.drawCanvasCtx.clearRect(0,0,this.drawCanvas.width,this.drawCanvas.height)}},{key:"renderActivations",value:function(){var t,e;this.clearActivations(),this.trainDigitBuffer.active&&(t=.125*this.drawCanvas.width,e=.75*this.drawCanvas.width,this.drawCanvasCtx.drawImage(this.trainDigitBuffer,0,0,28,28,t,t,e,e),this.nnComponent.hidePlaceholder(),this.nnComponent.setClearTimeout(),this.nnComponent.setClearOnInput()),this.nnComponent.getBarChart().update(this.currentProbabilities,this.currentTarget)}},{key:"estimateAccuracy",value:(i=o(regeneratorRuntime.mark(function t(r){var i,a,e,n=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<n.length&&void 0!==n[1]?n[1]:100,a=this.trainingController.data,e=tf.tidy(function(){var t=a.nextTestBatch(i),e=t.xs.reshape([i,28,28,1]),n=t.labels;return r.evaluate(e,n)[1].dataSync()}),i<1e3&&.9<e)return t.next=6,this.estimateAccuracy(r,1e3);t.next=7;break;case 6:return t.abrupt("return",t.sent);case 7:return t.abrupt("return",e<.9?Math.round(100*e):Math.round(1e3*e)/10);case 8:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)})}])&&c(t.prototype,n),r&&c(t,r),e}();n.default=i},{}],10:[function(t,e,n){var u=Object.create||function(t){function e(){}return e.prototype=t,new e},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},a=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=u(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,o=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),i=0===l.x}catch(t){i=!1}function c(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,a,s,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=u(null),t._eventsCount=0),a?("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),a.warned||(o=c(t))&&0<o&&a.length>o&&(a.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message))):(a=i[e]=n,++t._eventsCount),t}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=a.call(d,r);return i.listener=n,r.wrapFn=i}function p(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length):[]}function v(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');o=t}}):r.defaultMaxListeners=o,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(t,e,n,r){var i,a,s,o,u="error"===t,l=this._events;if(l)u=u&&null==l.error;else if(!u)return!1;if(u){if(1<arguments.length&&(i=e),i instanceof Error)throw i;var c=new Error('Unhandled "error" event. ('+i+")");throw c.context=i,c}if(!(a=l[t]))return!1;var h,d="function"==typeof a;switch(h=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var r=t.length,i=m(t,r),a=0;a<r;++a)i[a].call(n)}(a,d,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,a=m(t,i),s=0;s<i;++s)a[s].call(n,r)}(a,d,this,e);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var a=t.length,s=m(t,a),o=0;o<a;++o)s[o].call(n,r,i)}(a,d,this,e,n);break;case 4:!function(t,e,n,r,i,a){if(e)t.call(n,r,i,a);else for(var s=t.length,o=m(t,s),u=0;u<s;++u)o[u].call(n,r,i,a)}(a,d,this,e,n,r);break;default:for(s=new Array(h-1),o=1;o<h;o++)s[o-1]=arguments[o];!function(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,a=m(t,i),s=0;s<i;++s)a[s].apply(n,r)}(a,d,this,s)}return!0},r.prototype.on=r.prototype.addListener=function(t,e){return h(this,t,e,!1)},r.prototype.prependListener=function(t,e){return h(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,f(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,f(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,i,a,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=u(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,a=n.length-1;0<=a;a--)if(n[a]===e||n[a].listener===e){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,s||e)}return this},r.prototype.removeAllListeners=function(t){var e,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=u(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=u(null):delete n[t]),this;if(0===arguments.length){for(var r,i=s(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=u(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(a=e.length-1;0<=a;a--)this.removeListener(t,e[a]);return this},r.prototype.listeners=function(t){return p(this,t,!0)},r.prototype.rawListeners=function(t){return p(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):v.call(t,e)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}]},{},[5]);
//# sourceMappingURL=neural-numbers.min.js.map
